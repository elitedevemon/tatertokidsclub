import{j as e,a1 as h,a3 as C,I as N,z as g,y as Mt,a4 as G,H as f,T as r,a5 as Y,a6 as T,a7 as Dt,r as c,a8 as pe,a9 as te,aa as Et,W as ae,ab as Ts,Y as q,ac as qt,ad as Bt,_ as w,ae as Le,af as At,K as Q,n as _,q as F,i as z,E as L,ag as $,x as ze,ah as Fs,u as B,ai as E,aj as vs,ak as S,al as Je,am as $s,an as Qe,J as Rs,k as ne,l as Ut,ao as Ms,m as k,ap as Vt,X as W,Z as H,aq as ge,ar as Wt,as as Ie,at as ve,au as Ze,B as ie,s as v,av as Te,aw as Ot,F as Ds,ax as Ht,ay as Es,az as qs,aA as Bs,aB as K,aC as As,aD as Kt,G as Xe,V as Qt,p as bs,aE as Us,S as Gt,aF as Yt,aG as Jt,aH as Zt,aI as Xt,aJ as ea,aK as sa,aL as ta,aM as aa,aN as na,aO as ia,aP as ra,aQ as la,aR as oa,O as ca,aS as Ns,aT as da,aU as ma,aV as ua,aW as xa,N as ja,aX as ha,aY as fa,t as pa,M as ga,aZ as va}from"./main-ffa2cce8.js";import{u as ba,a as J,c as Na,b as ya,d as le,S as ys,e as Ge,G as ws,B as es,g as he,f as wa,h as Sa,A as Ca,T as ka,F as Pa,i as _a,j as fe,M as La,k as za,N as de,l as be,m as I,n as A,o as O,p as Z,q as Fe,r as Vs,P as ss,s as Ne,t as se,I as R,v as $e,w as oe,x as Ia,y as M,C as Ta,z as ce,D as X,K as Fa,E as ts,H as $a,J as Ws,L as Ra,O as Ma,Q as Os,R as Hs,U as ye,V as We,W as Da,X as Ea,Y as qa,Z as Ba,_ as Aa,$ as as,a0 as Ua,a1 as Va,a2 as Wa,a3 as Oa,a4 as Ks,a5 as Ha,a6 as Ka,a7 as Qa,a8 as Qs,a9 as Ga,aa as Ya,ab as Gs,ac as Ja,ad as Ys,ae as Za,af as Xa,ag as Re,ah as ns,ai as Js,aj as Zs,ak as Xs,al as et,am as Me,an as en,ao as sn,ap as tn,aq as is,ar as an,as as nn,at as rn,au as ln,av as on,aw as cn,ax as dn,ay as mn,az as rs,aA as un,aB as xn,aC as jn}from"./video-grid-26534bb5.js";import{aE as vo,aD as bo,aF as No,aG as yo}from"./video-grid-26534bb5.js";import{K as ls,F as hn,a as we,b as _e}from"./formatted-duration-00576b2e.js";import{L as fn,S as Se,T as st,a as pn,R as Ss,C as gn,F as vn,E as bn,b as Nn,c as tt,B as at}from"./BookmarkBorder-4fbe2eb3.js";import{C as yn,O as nt,E as os,B as wn,a as Oe}from"./breadcrumb-6b7605c7.js";import{O as Sn,t as Cn}from"./linkify.es-2810ab8e.js";function y({children:s,titleAppend:t,link:a,fontSize:n="text-2xl md:text-3xl",fontWeight:i="font-bold",margin:l="mb-20",className:o,headingType:d="h2",description:m,descriptionFontSize:u="text-base",actions:x,hideBorder:j,wrap:b=!1}){const D=a?e.jsx(N,{to:a,className:"rounded outline-none transition-colors hover:underline focus-visible:ring-2 focus-visible:ring-offset-2",children:s}):s;return e.jsxs("section",{className:h(o,l),children:[e.jsxs("div",{className:h("flex items-center gap-x-44 gap-y-14 max-md:overflow-x-auto",b&&"flex-wrap"),children:[e.jsx("div",{className:"flex-auto",children:e.jsxs("div",{className:h("relative flex items-center gap-4",!j&&"pl-14 before:absolute before:left-0 before:h-5/6 before:w-4 before:rounded before:bg-primary"),children:[e.jsx(d,{className:h(n,i),children:D}),t&&e.jsx("span",{className:"pt-4 text-base text-muted",children:t}),a&&e.jsx(C,{elementType:N,to:a,size:"sm",iconSize:"lg",className:"mt-4 max-md:hidden",children:e.jsx(ls,{})})]})}),x&&e.jsx("div",{className:"flex flex-shrink-0 items-center gap-4",children:x})]}),m&&e.jsx("div",{className:h("mt-6",u),children:m})]})}function it(s){const t=ba(s);return J({willSortOrFilter:!0,initialPage:s.content,queryKey:Na(s.id),endpoint:ya(s.id),queryParams:{returnContentOnly:"true",...t}})}function kn({channel:s}){var d;const t=le.models[s.config.contentModel],a=(t==null?void 0:t.sortMethods.map(m=>({key:m,label:le.sortingMethods[m].label})))||[];s.config.contentType==="manual"&&a.unshift({key:ys.curated,label:g("Default order")});const[n,i]=Mt(),l=n.get("order")||s.config.contentOrder;if((a==null?void 0:a.length)<2)return null;const o=(d=a==null?void 0:a.find(m=>m.key===l))==null?void 0:d.label;return e.jsxs(G,{selectionMode:"single",showCheckmark:!0,selectedValue:l,onSelectionChange:m=>{m===ys.recent&&s.config.contentType==="manual"&&(m="channelables.created_at:desc"),i(u=>(u.set("order",m),u),{replace:!0})},children:[e.jsxs("span",{role:"button","aria-label":"Toggle menu",children:[e.jsx(C,{className:"md:hidden",role:"presentation",children:e.jsx(Ge,{})}),e.jsx(f,{startIcon:e.jsx(Ge,{}),className:"max-md:hidden",role:"presentation",children:o?e.jsx(r,{...o}):e.jsx(r,{message:"Popularity"})})]}),e.jsx(Y,{children:a==null?void 0:a.map(m=>e.jsx(T,{value:m.key,children:e.jsx(r,{...m.label})},m.key))})]})}function rt(s){const t=le.models[s.config.contentModel],a=t==null?void 0:t.layoutMethods.filter(l=>le.userSelectableLayouts.includes(l)).map(l=>({key:l,label:le.layoutMethods[l].label,icon:le.layoutMethods[l].icon})),[n,i]=Dt(`channel-layout-${s.config.contentModel}`,s.config.selectedLayout||s.config.layout);return{selectedLayout:n,setSelectedLayout:i,availableLayouts:a}}function Pn({channel:s}){const{selectedLayout:t,setSelectedLayout:a,availableLayouts:n}=rt(s);if((n==null?void 0:n.length)<2)return null;const i=n==null?void 0:n.find(l=>l.key===t);return e.jsxs(G,{selectionMode:"single",showCheckmark:!0,selectedValue:t,onSelectionChange:l=>a(l),children:[e.jsxs("span",{role:"button","aria-label":"Toggle menu",children:[e.jsx(C,{className:"md:hidden",role:"presentation",children:(i==null?void 0:i.icon)||e.jsx(ws,{})}),e.jsx(f,{role:"presentation",className:"max-md:hidden",startIcon:(i==null?void 0:i.icon)||e.jsx(ws,{}),children:i!=null&&i.label?e.jsx(r,{...i.label}):e.jsx(r,{message:"Popularity"})})]}),e.jsx(Y,{children:n==null?void 0:n.map(l=>e.jsx(T,{value:l.key,children:e.jsx(r,{...l.label})},l.key))})]})}function lt({user:s}){const{auth:t}=c.useContext(pe);return e.jsxs("div",{className:"mr-24 flex flex-shrink-0 items-center gap-8",children:[e.jsx(te,{user:s,circle:!0,size:"sm"}),e.jsx("div",{children:e.jsx(r,{message:"List by <a>:name</a>",values:{a:()=>e.jsx(N,{to:t.getUserProfileLink(s),className:"font-bold hover:underline",children:s.name})}})})]})}const _n=Et(e.jsx("path",{d:"M 4 2 C 2.895 2 2 2.895 2 4 L 2 18 L 4 18 L 4 4 L 18 4 L 18 2 L 4 2 z M 8 6 C 6.895 6 6 6.895 6 8 L 6 20 C 6 21.105 6.895 22 8 22 L 20 22 C 21.105 22 22 21.105 22 20 L 22 8 C 22 6.895 21.105 6 20 6 L 8 6 z M 8 8 L 20 8 L 20 20 L 8 20 L 8 8 z M 16 9.0058594 C 15.230215 9.0058594 14.460443 9.2973698 13.878906 9.8789062 L 12.607422 11.150391 L 14.021484 12.564453 L 12.556641 14.029297 L 11.142578 12.615234 L 9.8789062 13.878906 C 8.7158332 15.041979 8.7158332 16.958021 9.8789062 18.121094 C 10.460397 18.702585 11.234094 19 12 19 C 12.765906 19 13.539603 18.702585 14.121094 18.121094 L 15.384766 16.857422 L 13.970703 15.443359 L 15.457031 13.957031 L 14.042969 12.542969 L 15.292969 11.292969 C 15.691896 10.894042 16.308104 10.894042 16.707031 11.292969 C 17.105958 11.691896 17.105958 12.308104 16.707031 12.707031 L 15.464844 13.949219 L 16.878906 15.363281 L 18.121094 14.121094 C 19.284167 12.958021 19.284167 11.041979 18.121094 9.8789062 C 17.539557 9.2973698 16.769785 9.0058594 16 9.0058594 z M 12.542969 14.042969 L 13.957031 15.457031 L 12.707031 16.707031 C 12.506522 16.90754 12.258094 17 12 17 C 11.741906 17 11.493478 16.90754 11.292969 16.707031 C 10.894042 16.308104 10.894042 15.691896 11.292969 15.292969 L 12.542969 14.042969 z"}));function Cs(s,t,a,n){const i=zn(s,t,a,n);s==="mail"?window.location.href=i:Ln(i)}function Ln(s){const n=(window.innerWidth-575)/2,i=(window.innerHeight-400)/2,l="status=1, scrollbars=1,width=575,height=400,top="+i+",left="+n;window.open(s,"share",l)}function zn(s,t,a,n){switch(s){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+t;case"twitter":return`https://twitter.com/intent/tweet?text=${a}&url=${t}`;case"pinterest":return"https://pinterest.com/pin/create/button/?url="+t+"&media="+n;case"tumblr":return"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption="+a+"&content="+n+"&url="+t;case"blogger":return"https://www.blogger.com/blog_this.pyra?t&u="+t+"&n="+a;case"mail":return`mailto:?subject=Check out this link.&body=${t}`}}function De({link:s,children:t}){const{trans:a}=ae(),[,n]=Ts(s);return e.jsxs(G,{children:[t,e.jsxs(Y,{children:[e.jsx(T,{value:"clipboard",startIcon:e.jsx(_n,{}),onSelected:()=>{n(),q.positive(g("Copied link to clipboard"))},children:e.jsx(r,{message:"Copy to clipboard"})}),e.jsx(T,{value:"facebook",startIcon:e.jsx(qt,{}),onClick:()=>{Cs("facebook",s,a(g("Check out this link")))},children:e.jsx(r,{message:"Share to facebook"})}),e.jsx(T,{value:"twitter",startIcon:e.jsx(Bt,{}),onClick:()=>{Cs("twitter",s,a(g("Check out this link")))},children:e.jsx(r,{message:"Share to twitter"})})]})]})}function In({list:s,children:t,...a}){const{user:n}=w(),i=c.useMemo(()=>Ee(s),[s]);let l;if(t)l=t;else if(s.internal&&s.name==="watchlist"){if(s.user_id!==(n==null?void 0:n.id))return e.jsx(r,{message:"Watchlist"});l=e.jsx(r,{message:"Watchlist"})}else l=s.name;return e.jsx(es,{...a,link:i,children:l})}function Ee(s,{absolute:t}={}){return s.name==="watchlist"?he("/watchlist",{absolute:t}):he(`/lists/${s.id}`,{absolute:t})}function ot({list:s,className:t,showShareButton:a,showVisibility:n=!0,showEditButton:i=!1}){const{user:l}=w();return e.jsxs("div",{className:h("flex flex-shrink-0 items-center gap-4 whitespace-nowrap text-muted",t),children:[a&&s.public&&e.jsxs(c.Fragment,{children:[e.jsx(Tn,{list:s}),e.jsx(ke,{marginLeft:"ml-2"})]}),s.items_count?e.jsxs(c.Fragment,{children:[e.jsx(r,{message:":count items",values:{count:s.items_count}}),e.jsx(ke,{})]}):null,e.jsx("span",{children:e.jsx(r,{message:"Updated :date",values:{date:e.jsx(Le,{date:s.updated_at})}})}),n&&e.jsxs(c.Fragment,{children:[e.jsx(ke,{}),s.public?e.jsx(fn,{size:"sm"}):e.jsx(At,{size:"sm"}),e.jsx("div",{children:s.public?e.jsx(r,{message:"Public"}):e.jsx(r,{message:"Private"})})]}),(l==null?void 0:l.id)===s.user_id&&i&&e.jsxs(c.Fragment,{children:[e.jsx(ke,{marginLeft:"ml-10"}),e.jsx(f,{elementType:N,to:`${Ee(s)}/edit`,variant:"outline",size:"2xs",color:"primary",children:e.jsx(r,{message:"Edit"})})]})]})}function Tn({list:s}){const t=Ee(s,{absolute:!0});return e.jsx(De,{link:t,children:e.jsx(f,{startIcon:e.jsx(Se,{}),sizeClassName:"px-10 py-6",children:e.jsx(r,{message:"Share"})})})}function ke({marginLeft:s="ml-12"}){return e.jsx("div",{className:h("mr-10 h-20 w-1 bg-divider",s)})}const Fn=[fe,La,za];function me({channel:s,isNested:t,actions:a,margin:n=t?"mb-16 md:mb-30":"mb-20 md:mb-40"}){const i=!t&&Fn.includes(s.config.contentModel)&&s.config.contentType==="listAll",{encodedFilters:l}=wa(),{filters:o,filtersLoading:d}=Sa({disabled:!i});return s.config.hideTitle?null:e.jsxs("section",{className:h(n),children:[e.jsx($n,{channel:s,isNested:t,actions:e.jsxs(c.Fragment,{children:[a,!t&&e.jsx(kn,{channel:s}),i&&e.jsx(Ca,{icon:e.jsx(ka,{}),color:null,variant:"text",disabled:d,filters:o}),!t&&e.jsx(Pn,{channel:s})]})}),i&&e.jsx("div",{className:"mt-14",children:e.jsx(Q,{initial:!1,mode:"wait",children:d&&l?e.jsx(Pa,{}):e.jsx(_.div,{...F,children:e.jsx(_a,{filters:o})},"filter-list")})})]})}function $n({channel:s,isNested:t,actions:a}){const{restriction:n}=z();if(s.config.hideTitle)return null;const i=s.config.restriction&&n?`/${s.slug}/${n}`:`/${s.slug}`;return e.jsx(y,{className:"flex-auto",margin:"m-0",description:e.jsx(Rn,{channel:s}),actions:a,headingType:t?"h2":"h1",descriptionFontSize:t?"text-sm":void 0,fontWeight:t?"font-normal":void 0,link:t?i:void 0,children:e.jsx(r,{message:s.name})})}function Rn({channel:s}){return s.type==="channel"?e.jsx(c.Fragment,{children:s.description}):e.jsxs("div",{className:"mt-18 items-center text-sm md:flex",children:[s.user&&e.jsx(lt,{user:s.user}),e.jsx(ot,{list:s,className:"ml-auto max-md:mt-14",showShareButton:!0,showEditButton:!0})]})}function Ce({children:s,className:t,variant:a,gridCols:n="grid-cols-[repeat(var(--nVisibleItems),minmax(0,1fr))]"}){return e.jsx("div",{className:h("grid gap-24",n,t,a==="landscape"?"content-grid-landscape":"content-grid-portrait"),children:s})}const ct=c.memo(({person:s,showRange:t})=>t&&s.birth_date&&s.death_date?e.jsx(hn,{timezone:"utc",start:s.birth_date,end:s.death_date,options:{year:"numeric"}}):s.birth_date?e.jsx(c.Fragment,{children:Mn(s.birth_date,s.death_date)}):null);function Mn(s,t){const a=t?new Date(t):new Date,n=new Date(s);let i=a.getFullYear()-n.getFullYear();const l=a.getMonth()-n.getMonth();return(l<0||l===0&&a.getDate()<n.getDate())&&i--,i}function dt({article:s}){return e.jsxs("div",{className:"items-start gap-14 lg:flex",children:[e.jsx(de,{article:s,className:"aspect-poster max-w-90 max-md:hidden"}),e.jsxs("div",{className:"min-w-0 overflow-hidden overflow-ellipsis text-base md:mt-24 lg:mt-6",children:[e.jsx(be,{article:s,className:"font-medium"}),e.jsxs(I,{className:"mt-10 min-w-0 overflow-hidden overflow-ellipsis text-xs",children:[e.jsx(L,{date:s.created_at}),e.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:s.source})]})]})]})}function qe({item:s,rating:t,description:a}){return e.jsxs("div",{children:[e.jsx("div",{className:"relative",children:e.jsx(A,{title:s,srcSize:"md",showPlayButton:!0})}),e.jsxs("div",{className:"mt-10 text-sm",children:[e.jsx(En,{title:s,rating:t,className:"mb-4"}),e.jsx(O,{title:s,className:"block text-base font-medium"}),a?e.jsx("div",{className:"mt-4",children:a}):null]})]})}function Dn({item:s}){return e.jsxs("div",{children:[e.jsx(Fe,{title:s,srcSize:"lg",size:"w-full",className:"rounded",wrapWithLink:!0,showPlayButton:!0}),e.jsxs("div",{className:"mt-10 text-sm",children:[e.jsx(O,{title:s,className:"mb-4 block text-base font-semibold"}),e.jsxs(I,{className:"mb-4",children:[s.release_date&&e.jsx(L,{date:s.release_date,timezone:"utc"}),s.certification&&e.jsx("div",{className:"uppercase",children:s.certification})]}),e.jsx(Z,{score:s.rating,className:"mb-4"})]})]})}function En({title:s,rating:t,className:a}){return t||(t=s.rating),t?e.jsx(Z,{score:t,className:a}):s.release_date?e.jsx("div",{className:a,children:e.jsx(L,{date:s.release_date,timezone:"utc"})}):null}function mt({item:s,variant:t}){switch(s.model_type){case fe:return t==="landscape"?e.jsx(Dn,{item:s}):e.jsx(qe,{item:s});case ss:return e.jsx(qn,{item:s});case Vs:return e.jsx(dt,{article:s});default:return null}}function qn({item:s}){return e.jsxs("div",{children:[e.jsx(Ne,{person:s,srcSize:"md",size:"w-full",rounded:!0}),e.jsxs("div",{className:"mt-10 text-center text-sm",children:[e.jsx(se,{person:s,className:"block text-base font-medium"}),e.jsx("div",{children:e.jsx(ct,{person:s,showRange:!0})})]})]})}function ks(s){const t=!s.isNested&&(!s.channel.config.paginationType||s.channel.config.paginationType==="infiniteScroll");return e.jsxs(c.Fragment,{children:[e.jsx(me,{...s}),t?e.jsx(Bn,{...s}):e.jsx(An,{...s})]})}function Bn({channel:s,variant:t}){const a=it(s);return e.jsxs("div",{className:h("transition-opacity",a.isReloading&&"opacity-70"),children:[e.jsx(je,{content:a.items,variant:t}),e.jsx(R,{query:a})]})}function An({channel:s,variant:t,isNested:a}){var i;const n=$e(s,null,{isNested:a});return e.jsxs("div",{className:h("transition-opacity",n.isPlaceholderData&&"opacity-70"),children:[!a&&e.jsx(oe,{pagination:n.data,type:s.config.paginationType,className:"mb-24"}),e.jsx(je,{content:(i=n.data)==null?void 0:i.data,variant:t}),!a&&e.jsx(oe,{pagination:n.data,type:s.config.paginationType,className:"mt-24",scrollToTop:!0})]})}function je({content:s=[],variant:t}){return e.jsx(Ce,{variant:t,children:s.map(a=>e.jsx(mt,{item:a,variant:t},`${a.id}-${a.model_type}`))})}function Ql(){const{query:s}=z(),t=Ia("searchPage",s);return e.jsxs(c.Fragment,{children:[e.jsx($,{query:t}),e.jsx(M,{children:e.jsx("section",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:e.jsxs("main",{children:[e.jsx(Un,{}),e.jsx(Vn,{query:t})]})})})]})}function Un(){const{searchQuery:s=""}=z(),t=ze(),{trans:a}=ae();return e.jsx(Fs,{defaultValue:s,onChange:n=>{t(`/search/${n.target.value}`,{replace:!0})},autoFocus:!0,className:"w-full md:hidden",size:"lg",placeholder:a(g("Search..."))})}function Vn({query:s}){const{branding:t}=B();return s.data?s.data.results.length===0?e.jsx(E,{className:"mt-40",image:e.jsx(vs,{size:"xl"}),imageHeight:"h-auto",imageMargin:"mb-12",title:e.jsx(r,{message:"Could not find any results for “:query”",values:{query:s.data.query}}),description:e.jsx(r,{message:"Try a different search query."})}):e.jsx(Wn,{query:s}):s.fetchStatus==="idle"?e.jsx(E,{className:"mt-40",image:e.jsx(vs,{size:"xl"}),imageHeight:"h-auto",imageMargin:"mb-12",title:e.jsx(r,{message:"Search :siteName",values:{siteName:t.site_name}}),description:e.jsx(r,{message:"Find movies, tv series, people and more."})}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"})}function Wn({query:s}){const{query:t}=z(),{movies:a,series:n,people:i}=c.useMemo(()=>{var m;const l=[],o=[],d=[];return(m=s.data)==null||m.results.forEach(u=>{u.model_type===fe&&u.is_series?o.push(u):u.model_type===fe&&!u.is_series?l.push(u):u.model_type===ss&&d.push(u)}),{movies:l,series:o,people:d}},[s]);return e.jsxs(c.Fragment,{children:[e.jsx(y,{className:"my-24 md:mb-48",headingType:"h1",fontSize:"text-xl md:text-3xl",hideBorder:!0,children:e.jsx(r,{message:"Search results for: “:query“",values:{query:t}})}),a.length>0&&e.jsxs("div",{className:"mb-48",children:[e.jsx(y,{fontSize:"text-2xl",children:e.jsx(r,{message:"Movies"})}),e.jsx(je,{content:a,variant:"portrait"})]}),n.length>0&&e.jsxs("div",{className:"mb-48",children:[e.jsx(y,{fontSize:"text-2xl",children:e.jsx(r,{message:"Series"})}),e.jsx(je,{content:n,variant:"portrait"})]}),i.length>0&&e.jsxs("div",{className:"mb-48",children:[e.jsx(y,{fontSize:"text-2xl",children:e.jsx(r,{message:"People"})}),e.jsx(je,{content:i,variant:"portrait"})]})]})}var On=Hn;function Hn(s,t,a){var n=null,i=null,l=function(){n&&(clearTimeout(n),i=null,n=null)},o=function(){var m=i;l(),m&&m()},d=function(){if(!t)return s.apply(this,arguments);var m=this,u=arguments,x=a&&!n;if(l(),i=function(){s.apply(m,u)},n=setTimeout(function(){if(n=null,!x){var j=i;return i=null,j()}},t),x)return i()};return d.cancel=l,d.flush=o,d}const Kn="content-carousel content-grid relative w-full grid grid-flow-col grid-rows-[auto] overflow-x-auto overflow-y-hidden gap-24 snap-always snap-x snap-mandatory hidden-scrollbar scroll-smooth",Qn="snap-start snap-normal";function cs({rotate:s=!1}={}){const t=c.useRef(null),a=c.useRef(0),n=c.useRef(5),[i,l]=c.useState(s),[o,d]=c.useState(!0),[m,u]=c.useState(0),x=c.useCallback(()=>{const p=t.current;if(p&&a.current){s||(d(p.scrollWidth-1>p.scrollLeft+p.clientWidth),l(p.scrollLeft>0));const P=p.clientWidth,V=Math.round(p.scrollLeft/P);u(V)}},[s]);c.useEffect(()=>{const p=t.current,P=On(()=>x(),100);return p&&p.addEventListener("scroll",P),()=>p==null?void 0:p.removeEventListener("scroll",P)},[x]),Je(()=>{const p=t.current;if(p){n.current=Number(getComputedStyle(p).getPropertyValue("--nVisibleItems"));const P=p.children.item(0),V=new ResizeObserver(xe=>{a.current=xe[0].contentRect.width,x()});return P&&V.observe(P),()=>V.unobserve(p)}},[x]);const j=c.useCallback(p=>{if(t.current){u(p);const P=a.current*p;t.current.scrollTo({left:P})}},[]),b=c.useCallback(()=>{if(t.current){const p=t.current.clientWidth,P=t.current.scrollLeft,V=!P&&s?t.current.scrollWidth-p:P-p;t.current.scrollTo({left:V})}},[s]),D=c.useCallback(()=>{if(t.current){const p=t.current.clientWidth,P=t.current.scrollLeft,V=s&&P+p>=t.current.scrollWidth?0:(m+1)*p;t.current.scrollTo({left:V})}},[m,s]);return{scrollContainerRef:t,scrollToIndex:j,scrollToPreviousPage:b,scrollToNextPage:D,canScrollForward:o,canScrollBackward:i,activePage:m,containerClassName:Kn,itemClassName:Qn}}function Ps(s){var j;const{channel:t,variant:a}=s,{scrollContainerRef:n,canScrollForward:i,canScrollBackward:l,scrollToPreviousPage:o,scrollToNextPage:d,containerClassName:m,itemClassName:u}=cs(),x=a==="landscape"?"content-grid-landscape":"content-grid-portrait";return e.jsxs("div",{children:[e.jsx(me,{...s,actions:e.jsxs(c.Fragment,{children:[e.jsx(C,{disabled:!l,onClick:()=>o(),"aria-label":"Previous page",children:e.jsx($s,{})}),e.jsx(C,{disabled:!i,onClick:()=>d(),"aria-label":"Next page",children:e.jsx(ls,{})})]})}),e.jsx("div",{ref:n,className:h(m,x),children:(j=t.content)==null?void 0:j.data.map(b=>e.jsx("div",{className:u,children:e.jsx(mt,{item:b,variant:a})},`${b.id}-${b.model_type}`))})]})}function Gn({channel:s,isNested:t}){const{scrollContainerRef:a,activePage:n,canScrollBackward:i,canScrollForward:l,scrollToNextPage:o,scrollToPreviousPage:d}=cs({rotate:!0}),{data:m}=$e(s);return e.jsxs(c.Fragment,{children:[e.jsx(me,{channel:s,isNested:t,margin:"mb-18"}),e.jsxs("div",{className:"gap-24 md:flex",children:[e.jsxs("div",{className:"relative flex-auto",children:[e.jsx("div",{ref:a,className:"hidden-scrollbar flex h-full select-none snap-x snap-mandatory snap-always items-center overflow-x-auto",children:m==null?void 0:m.data.map((u,x)=>e.jsx(Yn,{item:u,index:x},u.id))}),e.jsxs("div",{className:"absolute top-10 z-20 w-full md:top-[170px]",children:[e.jsx("div",{className:"absolute left-8 hidden md:left-14 md:block",children:e.jsx(C,{variant:"outline",size:"lg",color:"white",disabled:!i,onClick:()=>d(),children:e.jsx(Ta,{})})}),e.jsx("div",{className:"absolute right-8 hidden md:right-14 md:block",children:e.jsx(C,{variant:"outline",size:"lg",color:"white",disabled:!l,onClick:()=>o(),children:e.jsx(yn,{})})})]})]}),e.jsx(Jn,{titles:(m==null?void 0:m.data)??[],activePage:n})]})]})}function Yn({item:s,index:t}){return e.jsxs("div",{className:"relative h-full w-full flex-shrink-0 snap-start snap-normal overflow-hidden rounded",children:[e.jsx(Fe,{title:s,lazy:t>0,className:"min-h-240 md:min-h-0",wrapperClassName:"h-full"}),e.jsxs("div",{className:"absolute inset-0 isolate flex h-full w-full items-center justify-start gap-24 rounded p-30 text-white md:items-end",children:[e.jsx("div",{className:"absolute left-0 h-full w-full bg-gradient-to-b from-black/40 max-md:top-0 md:bottom-0 md:h-3/4 md:bg-gradient-to-t md:from-black/100"}),e.jsx(A,{title:s,size:"max-h-320",srcSize:"md",className:"z-10 shadow-md max-md:hidden"}),e.jsxs("div",{className:"z-10 text-lg md:max-w-620",children:[e.jsx(Z,{score:s.rating}),e.jsx("div",{className:"my-8 text-2xl md:text-5xl",children:e.jsx(O,{title:s})}),s.description&&e.jsx("p",{className:"max-md:hidden",children:s.description}),s.primary_video&&e.jsx(f,{variant:"flat",color:"primary",startIcon:e.jsx(ce,{}),radius:"rounded-full",className:"mt-24 md:min-h-42 md:min-w-144",elementType:N,to:X(s.primary_video),children:s.primary_video.category==="full"?e.jsx(r,{message:"Watch now"}):e.jsx(r,{message:"Play trailer"})})]})]})]})}function Jn({titles:s,activePage:t}){const a=s.length,n=t+1,i=n+3,l=s.slice(n,i);return i>a&&l.push(...s.slice(0,i-a)),e.jsx(Q,{initial:!1,mode:"wait",children:e.jsxs("div",{className:"w-1/4 max-w-200 flex-shrink-0 max-md:hidden",children:[e.jsx("div",{className:"mb-12 text-lg font-semibold",children:e.jsx(r,{message:"Up next"})}),e.jsx("div",{className:"flex flex-col gap-24",children:l.map(o=>e.jsxs(_.div,{className:"relative flex-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsx(Fe,{title:o,className:"mb-6 rounded",size:"w-full",srcSize:"md",wrapWithLink:!0,showPlayButton:!0}),e.jsx("div",{className:"mb-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",children:e.jsx(O,{title:o,className:"text-base font-medium"})}),e.jsx("div",{children:e.jsx(Z,{score:o.rating,className:"text-sm"})})]},o.id))})]})})}function Be({article:s,className:t}){return e.jsxs("div",{className:h("flex items-center gap-4 text-primary",t),children:[e.jsx(nt,{size:"xs",className:"flex-shrink-0"}),e.jsx("a",{href:s.source_url,target:"_blank",rel:"noreferrer",className:h(Qe,"overflow-hidden overflow-ellipsis whitespace-nowrap"),children:s.source})]})}function Ae({article:s}){return s.byline?e.jsx("span",{className:"whitespace-nowrap",children:e.jsx(r,{message:"By :name",values:{name:s.byline}})}):null}function Zn({channel:s,isNested:t}){var n,i;const a=$e(s,null,{isNested:t});return e.jsxs("div",{children:[e.jsx(me,{channel:s,isNested:t}),!t&&e.jsx(oe,{pagination:a.data,type:s.config.paginationType,className:"mb-34"}),e.jsxs("div",{className:"flex gap-34",children:[e.jsx("div",{className:"w-240 flex-shrink-0",children:(n=a.data)==null?void 0:n.data.slice(0,3).map(l=>e.jsx(Xn,{article:l,className:"mb-14"},l.id))}),e.jsx("div",{className:"flex-auto",children:(i=a.data)==null?void 0:i.data.slice(3,12).map(l=>e.jsxs("div",{className:"mb-12 flex items-center gap-14",children:[e.jsx(de,{article:l,size:"w-84 h-84"}),e.jsxs("div",{className:"flex-auto",children:[e.jsx(be,{article:l,className:"font-semibold"}),e.jsxs(I,{className:"text-sm",children:[e.jsx(L,{date:l.created_at}),e.jsx(Ae,{article:l}),e.jsx(Be,{article:l})]})]})]},l.id))})]}),!t&&e.jsx(oe,{pagination:a.data,type:s.config.paginationType,className:"mt-34",scrollToTop:!0})]})}function Xn({article:s,className:t}){return e.jsxs("div",{className:t,children:[e.jsx(de,{article:s,size:"aspect-video w-full"}),e.jsx(be,{article:s,className:"mt-10 block text-sm font-semibold"}),e.jsxs("div",{className:"mt-8 text-xs text-muted",children:[e.jsx(Ae,{article:s}),e.jsx(Be,{article:s,className:"mt-4"})]})]})}function ei({item:s}){switch(s.model_type){case fe:return e.jsxs("div",{className:"mb-24 flex items-start gap-24",children:[e.jsx(A,{title:s,srcSize:"md",size:"w-128",showPlayButton:!0}),e.jsxs("div",{className:"min-w-0 flex-auto pt-12",children:[e.jsx(O,{title:s,className:"font-medium"}),e.jsxs(I,{className:"mt-4 text-sm",children:[s.runtime?e.jsx(we,{minutes:s.runtime,verbose:!0}):null,s.certification&&e.jsx("span",{className:"uppercase",children:s.certification})]}),s.rating&&s.status!=="upcoming"?e.jsx(ts,{size:"md",title:s,className:"my-12"}):e.jsx("div",{className:"my-12",children:e.jsx(L,{date:s.release_date,timezone:"utc"})}),s.description?e.jsx("p",{className:"text-sm",children:s.description}):null]})]});case ss:return e.jsxs("div",{className:"mb-24 flex items-start gap-24",children:[e.jsx(Ne,{person:s,srcSize:"md",size:"w-128"}),e.jsxs("div",{className:"min-w-0 flex-auto pt-12",children:[e.jsx(se,{person:s,className:"block text-lg font-medium"}),s.primary_credit?e.jsx("div",{className:"mt-4 text-sm",children:e.jsx(Fa,{person:s})}):null,e.jsx("p",{className:"mt-12 text-sm",children:s.description})]})]});case Vs:return e.jsxs("div",{className:"mb-44 flex items-start gap-14",children:[e.jsx(de,{article:s,className:"aspect-poster max-w-90"}),e.jsxs("div",{className:"mt-6 text-base",children:[e.jsx(be,{article:s,className:"font-medium"}),e.jsx("p",{className:"mt-10 text-sm",children:s.body}),e.jsxs(I,{className:"mt-10 text-xs",children:[e.jsx(L,{date:s.created_at}),e.jsx(Be,{article:s})]})]})]});default:return null}}function si(s){const t=!s.isNested&&(!s.channel.config.paginationType||s.channel.config.paginationType==="infiniteScroll");return e.jsxs(c.Fragment,{children:[e.jsx(me,{...s}),t?e.jsx(ti,{...s}):e.jsx(ai,{...s})]})}function ti({channel:s}){const t=it(s);return e.jsx(ut,{content:t.items,className:h("transition-opacity",t.isReloading&&"opacity-70"),children:e.jsx(R,{query:t})})}function ai({channel:s,isNested:t}){var n;const a=$e(s,null,{isNested:t});return e.jsxs("div",{className:h("transition-opacity",a.isPlaceholderData&&"opacity-70"),children:[!t&&e.jsx(oe,{pagination:a.data,type:s.config.paginationType,className:"mb-24"}),e.jsx(ut,{content:(n=a.data)==null?void 0:n.data}),!t&&e.jsx(oe,{pagination:a.data,type:s.config.paginationType,className:"mt-24",scrollToTop:!0})]})}function ut({content:s=[],children:t,className:a}){return e.jsxs("div",{className:a,children:[s.map(n=>e.jsx(ei,{item:n},`${n.id}-${n.model_type}`)),t]})}function xt(s){var t;return s.isNested&&!((t=s.channel.content)!=null&&t.data.length)?null:s.channel.config.contentModel===$a?e.jsx(ri,{...s}):e.jsxs(c.Fragment,{children:[e.jsx(ii,{...s}),e.jsx(ni,{channel:s.channel})]})}function ni({channel:s}){var t;return((t=s.content)==null?void 0:t.data.length)===0?e.jsx(E,{className:"mt-60",image:e.jsx(Rs,{src:Ws}),title:s.type==="list"?e.jsx(r,{message:"This list does not have any content yet."}):e.jsx(r,{message:"This channel does not have any content yet."})}):null}function ii(s){const{channel:t,isNested:a}=s,{selectedLayout:n}=rt(t);switch(a?t.config.nestedLayout:n){case"grid":return e.jsx(ks,{...s,variant:"portrait"});case"landscapeGrid":return e.jsx(ks,{...s,variant:"landscape"});case"list":return e.jsx(si,{...s});case"carousel":return e.jsx(Ps,{...s,variant:"portrait"});case"landscapeCarousel":return e.jsx(Ps,{...s,variant:"landscape"});case"slider":return e.jsx(Gn,{...s});case"news":return e.jsx(Zn,{...s});default:return null}}function ri({channel:s,isNested:t}){var a;return e.jsxs(c.Fragment,{children:[e.jsx(me,{channel:s,isNested:t}),(a=s.content)==null?void 0:a.data.map(n=>e.jsx("div",{className:"mb-40 md:mb-50",children:e.jsx(xt,{channel:n,isNested:!0})},n.id))]})}function jt({slugOrId:s,type:t="channel"}){const a=Ra(s,"channelPage",{channelType:t});let n=null;return a.data?n=e.jsxs("div",{children:[e.jsx($,{query:a}),e.jsx("div",{className:"pb-24",children:e.jsx("div",{className:"container mx-auto p-14 @container md:p-24",children:e.jsx(xt,{channel:a.data.channel,isNested:!1},a.data.channel.id)})})]}):n=e.jsx(S,{query:a,loaderClassName:"absolute inset-0 m-auto",loaderIsScreen:!1}),e.jsx(M,{children:n})}function Gl(){return e.jsx(jt,{type:"list"})}function li(){const{homepage:s}=B();let t="homepage";return(s==null?void 0:s.type)==="channel"&&s.value&&(t=s.value),e.jsx(jt,{slugOrId:t})}function Ue(){const{videoId:s}=z();return ne({queryKey:["video","watch-page",s],queryFn:()=>oi(s),placeholderData:Ut,initialData:()=>{var a;const t=(a=Ms().loaders)==null?void 0:a.watchPage;if(t&&`${t.video.id}`===s)return t}})}function oi(s){return k.get(`watch/${s}`).then(t=>t.data)}function ci(s,t={}){return["comment",`${s.id}-${s.model_type}`,t]}function di(s,t={}){return J({queryKey:ci(s,t),endpoint:"commentable/comments",queryParams:{commentable_type:s.model_type,commentable_id:s.id,...t}})}function mi(){const s=Vt();return W({mutationFn:t=>ui(t),onSuccess:async(t,a)=>{await s.invalidateQueries({queryKey:["comment",`${a.commentable.id}-${a.commentable.model_type}`]}),q(g("Comment posted"))},onError:t=>H(t)})}function ui({commentable:s,content:t,inReplyTo:a,...n}){const i={commentable_id:s.id,commentable_type:s.model_type,content:t,inReplyTo:a,...n};return k.post("comment",i).then(l=>l.data)}function ht({commentable:s,inReplyTo:t,onSuccess:a,className:n,autoFocus:i,payload:l,...o}){const{trans:d}=ae(),{user:m}=w(),u=mi(),x=ge(),j=Wt(o.inputRef),[b,D]=c.useState(!1),[p,P]=c.useState(""),V=()=>{D(!1),j.current&&(j.current.blur(),P(""))};return e.jsxs("form",{className:h("flex gap-24 py-6",n),onSubmit:xe=>{xe.preventDefault(),p&&!u.isPending&&u.mutate({...l,commentable:s,content:p,inReplyTo:t},{onSuccess:()=>{V(),a==null||a()}})},children:[e.jsx(Ie,{size:x?"lg":"xl",circle:!0,src:m==null?void 0:m.image,label:m==null?void 0:m.name}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("div",{className:"mb-10 text-xs text-muted",children:e.jsx(r,{message:"Comment as :name",values:{name:e.jsx("span",{className:"font-medium text",children:m==null?void 0:m.name})}})}),e.jsx(Fs,{inputRef:j,autoFocus:i,inputElementType:"textarea",inputClassName:"resize-none",value:p,onChange:xe=>P(xe.target.value),onFocus:()=>D(!0),onBlur:()=>{p||D(!1)},minLength:3,rows:b?3:1,placeholder:d(t?g("Write a reply"):g("Leave a comment"))}),b&&e.jsxs("div",{className:"mt-12 flex items-center justify-end gap-12",children:[e.jsx(f,{variant:"outline",onClick:()=>V(),children:e.jsx(r,{message:"Cancel"})}),e.jsx(f,{variant:"outline",color:"primary",type:"submit",disabled:u.isPending||p.length<3,children:e.jsx(r,{message:"Comment"})})]})]})]})}function xi(s){return W({mutationFn:t=>ji(s,t),onSuccess:t=>{},onError:t=>H(t)})}function ji(s,t){return k.post("vote",{vote_type:t.voteType,model_id:s.id,model_type:s.model_type}).then(a=>a.data)}function ft({model:s,className:t,showUpvotesOnly:a}){const n=xi(s),[i,l]=c.useState(s.upvotes||0),[o,d]=c.useState(s.downvotes||0),[m,u]=c.useState(s.current_vote),x=j=>{l(j.upvotes),d(j.downvotes),u(j.current_vote)};return e.jsxs("div",{className:h(t,"whitespace-nowrap"),children:[e.jsxs(f,{className:"gap-6",sizeClassName:"px-8 py-4",color:m==="upvote"?"primary":void 0,disabled:n.isPending,"aria-label":"Upvote",onClick:()=>{n.mutate({voteType:"upvote"},{onSuccess:j=>x(j.model)})},children:[e.jsx(st,{}),e.jsx("div",{children:e.jsx(_e,{value:i})})]}),!a&&e.jsxs(f,{className:"gap-6",sizeClassName:"px-8 py-4",color:m==="downvote"?"primary":void 0,disabled:n.isPending,"aria-label":"Downvote",onClick:()=>{n.mutate({voteType:"downvote"},{onSuccess:j=>x(j.model)})},children:[e.jsx(pn,{}),e.jsx("div",{children:e.jsx(_e,{value:o})})]})]})}function ds(s){return W({mutationFn:t=>hi(s,t),onSuccess:()=>{q(g("Thanks for reporting. We will review this content."))},onError:t=>H(t)})}function hi(s,t){return k.post("report",{reason:t.reason,model_id:s.id,model_type:s.model_type}).then(a=>a.data)}function fi({comment:s,commentable:t,canDelete:a}){const n=ge(),{user:i,hasPermission:l}=w(),[o,d]=c.useState(!1),m=i!=null&&!s.deleted&&s.depth<5&&l("comments.create");return e.jsxs("div",{style:{paddingLeft:`${s.depth*20}px`},children:[e.jsxs("div",{className:"group flex min-h-70 items-start gap-24 py-18",children:[s.user?e.jsx(te,{user:s.user,size:n?"lg":"xl",circle:!0}):e.jsx(Ie,{label:"User"}),e.jsxs("div",{className:"flex-auto text-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-8",children:[s.user&&e.jsx(vi,{user:s.user}),e.jsx("time",{className:"text-xs text-muted",children:e.jsx(Le,{date:s.created_at})}),s.position?e.jsx(pi,{commentable:t,position:s.position}):null]}),e.jsx("div",{className:"whitespace-pre-line",children:s.deleted?e.jsx("span",{className:"italic text-muted",children:e.jsx(r,{message:"[COMMENT DELETED]"})}):s.content}),!s.deleted&&e.jsxs("div",{className:"-ml-8 mt-10 flex items-center gap-8",children:[m&&e.jsxs("div",{className:"contents",children:[e.jsx(f,{className:"max-md:hidden",sizeClassName:"text-sm px-8 py-4",startIcon:e.jsx(Ss,{}),onClick:()=>d(!o),children:e.jsx(r,{message:"Reply"})}),e.jsx(C,{className:"md:hidden",onClick:()=>d(!o),children:e.jsx(Ss,{})})]}),e.jsx(ft,{model:s,showUpvotesOnly:!0}),e.jsx(gi,{comment:s,canDelete:a,user:i})]})]})]}),o?e.jsx(ht,{className:s!=null&&s.depth?void 0:"pl-20",commentable:t,inReplyTo:s,autoFocus:!0,onSuccess:()=>{d(!1)}}):null]})}const pi=c.memo(({commentable:s,position:t})=>{if(!s.duration)return null;const a=t/100*(s.duration/1e3);return e.jsx("span",{className:"text-xs text-muted",children:e.jsx(r,{message:"at :position",values:{position:e.jsx(we,{seconds:a})}})})});function gi({comment:s,canDelete:t,user:a}){const n=Ma(),i=ds(s),[l,o]=c.useState(!1),d=(s.user_id===(a==null?void 0:a.id)||t)&&!s.deleted,m=()=>{i.mutate({})},u=x=>{o(!1),x&&n.mutate({commentIds:[s.id]},{onSuccess:()=>{ie.invalidateQueries({queryKey:["comment"]})}})};return e.jsxs(c.Fragment,{children:[e.jsxs(G,{children:[e.jsx(f,{startIcon:e.jsx(Os,{}),sizeClassName:"text-sm px-8 py-4",children:e.jsx(r,{message:"More"})}),e.jsxs(Y,{children:[e.jsx(T,{value:"report",onSelected:()=>m(),children:e.jsx(r,{message:"Report comment"})}),d&&e.jsx(T,{value:"delete",onSelected:()=>o(!0),children:e.jsx(r,{message:"Delete"})})]})]}),e.jsx(ve,{type:"modal",isOpen:l,onClose:x=>u(x),children:e.jsx(Ze,{isDanger:!0,title:e.jsx(r,{message:"Delete comment?"}),body:e.jsx(r,{message:"Are you sure you want to delete this comment?"}),confirm:e.jsx(r,{message:"Delete"})})})]})}function vi({user:s}){const{auth:t}=c.useContext(pe);return t.getUserProfileLink?e.jsx(N,{to:t.getUserProfileLink(s),className:"text-base font-medium hover:underline",children:s.name}):e.jsx("div",{className:"text-base font-medium",children:s.name})}function pt({message:s}){const{user:t}=w();return t?null:e.jsxs("div",{className:"mx-auto my-40 max-w-850 rounded border border-dashed px-20 py-30 text-center",children:[e.jsx("div",{className:"mb-8 text-xl font-semibold",children:e.jsx(r,{message:"Account required"})}),e.jsx("div",{className:"text-base text-muted",children:e.jsx(r,{...s,values:{l:a=>e.jsx(N,{className:Qe,to:"/login",children:a}),r:a=>e.jsx(N,{className:Qe,to:"/register",children:a})}})})]})}const bi=g("Please <l>login</l> or <r>create account</r> to comment");function Ni({className:s,commentable:t,canDeleteAllComments:a=!1,children:n,perPage:i=25}){const{items:l,totalItems:o,...d}=di(t,{perPage:i});return d.isError?null:e.jsxs("div",{className:s,children:[e.jsxs("div",{className:"mb-8 flex items-center gap-8 border-b pb-8",children:[e.jsx(gn,{size:"sm",className:"text-muted"}),d.isInitialLoading?e.jsx(r,{message:"Loading comments..."}):e.jsx(r,{message:":count comments",values:{count:e.jsx(_e,{value:o||0})}})]}),n,e.jsx(pt,{message:bi}),e.jsx(Q,{initial:!1,mode:"wait",children:d.isInitialLoading?e.jsx(wi,{count:4}):e.jsx(yi,{comments:l,canDeleteAllComments:a,commentable:t})}),e.jsx(R,{query:d,variant:"loadMore"})]})}function yi({comments:s,commentable:t,canDeleteAllComments:a}){return s.length?e.jsx(_.div,{...F,children:s.map(n=>e.jsx(fi,{comment:n,commentable:t,canDelete:a},n.id))},"comments"):e.jsx(E,{className:"mt-24",size:"sm",title:e.jsx(r,{message:"Seems a little quiet over here"}),description:e.jsx(r,{message:"Be the first to comment"})})}function wi({count:s}){return e.jsx(_.div,{...F,children:[...new Array(s).keys()].map(t=>e.jsxs("div",{className:"group flex min-h-70 items-start gap-24 py-18",children:[e.jsx(v,{variant:"avatar",radius:"rounded-full",size:"w-60 h-60"}),e.jsxs("div",{className:"flex-auto text-sm",children:[e.jsx(v,{className:"mb-4 max-w-184 text-base"}),e.jsx(v,{className:"text-sm"}),e.jsxs("div",{className:"mt-10 flex items-center gap-8",children:[e.jsx(v,{className:"max-w-70 text-sm"}),e.jsx(v,{className:"max-w-40 text-sm"}),e.jsx(v,{className:"max-w-60 text-sm"})]})]})]},t))},"loading-skeleton")}function gt(s){return W({mutationFn:()=>Si(s),onSuccess:()=>{q(g("Report removed"))},onError:t=>H(t)})}function Si(s){return k.delete(`report/${s.model_type}/${s.id}`).then(t=>t.data)}function ue(){const{streaming:s}=B();return(s==null?void 0:s.prefer_full)||!1}function Ci(){var n;const{data:s}=Ue(),t=ue(),a=s?e.jsx(_s,{poster:e.jsx(A,{size:"w-132",srcSize:"md",title:s.title,showPlayButton:!0,className:"max-md:hidden"}),titleLink:e.jsx(O,{title:s.title}),videoName:t?void 0:s.video.name,episodeName:s.episode?e.jsxs(Hs,{title:s.title,episode:s.episode,children:[s.episode.name," (",e.jsx(ye,{episode:s.episode}),")"]}):void 0,description:((n=s.episode)==null?void 0:n.description)||s.title.description,rate:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ft,{model:s.video,className:"mr-auto"}),e.jsx(Pi,{video:s.video}),e.jsx(ki,{video:s.video})]})},"loaded"):e.jsx(_s,{poster:e.jsx(v,{variant:"rect",size:"w-132 aspect-poster"}),titleLink:e.jsx(v,{className:"max-w-144"}),videoName:e.jsx(v,{className:"max-w-240"}),description:e.jsxs(c.Fragment,{children:[e.jsx(v,{}),e.jsx(v,{})]}),rate:e.jsxs("div",{className:"flex h-32 items-center gap-2",children:[e.jsx(v,{variant:"rect",size:"w-56 h-24",className:"mr-10"}),e.jsx(v,{variant:"rect",size:"w-56 h-24"})]})},"skeleton");return e.jsx(Q,{initial:!1,mode:"wait",children:a})}function ki({video:s}){const t=X(s,{absolute:!0});return e.jsx(De,{link:t,children:e.jsx(Te,{label:e.jsx(r,{message:"Share"}),children:e.jsx(C,{children:e.jsx(Se,{})})})})}function Pi({video:s}){const t=ds(s),a=gt(s),[n,i]=c.useState(s.current_user_reported);return e.jsx(Te,{label:e.jsx(r,{message:"Report"}),children:e.jsx(C,{onClick:()=>{n?a.mutate():t.mutate({}),i(!n)},children:e.jsx(vn,{})})})}function _s({poster:s,titleLink:t,videoName:a,episodeName:n,description:i,rate:l}){return e.jsxs(_.div,{className:"flex items-start gap-16 overflow-hidden rounded pr-6",...F,children:[s,e.jsxs("div",{className:"flex-auto py-6",children:[e.jsx("h1",{className:"mb-6 text-2xl font-medium",children:t}),n&&e.jsx("div",{className:"text-base font-medium",children:n}),a&&e.jsx("div",{className:"text-base font-medium",children:a}),e.jsx("div",{className:"my-12",children:l}),i&&e.jsx("p",{className:"max-w-780 text-sm text-muted",children:i})]})]})}function _i(){const{data:s}=Ue(),t=s?e.jsx(_.div,{...F,children:s.related_videos.map(a=>e.jsx(zi,{video:a,activeVideo:s.video},a.id))},"loaded"):e.jsxs(_.div,{...F,children:[e.jsx(We,{className:"mb-34"}),e.jsx(We,{className:"mb-34"}),e.jsx(We,{className:"mb-34"})]},"skeleton");return e.jsxs("aside",{className:"w-350 flex-shrink-0 max-lg:mt-54",children:[e.jsx(y,{fontWeight:"font-medium",fontSize:"text-2xl",margin:"mb-28",children:e.jsx(Li,{})}),e.jsx(Q,{initial:!1,mode:"wait",children:t})]})}function Li(){const{data:s}=Ue(),t=ue();return s!=null&&s.video?t?e.jsx(r,{message:"Related movies & series"}):e.jsx(r,{message:"Related videos"}):e.jsx("div",{className:"h-32"})}function zi({video:s,activeVideo:t}){const a=ue();let n=s.name;return a&&(s.episode?n=e.jsxs("span",{children:[s.episode.name," (",e.jsx(ye,{episode:s.episode}),")"]}):n=s.title.name),e.jsx(Da,{video:s,title:s.title,episode:s.episode,forceTitleBackdrop:a,className:h("mb-24 text-sm",t.id===s.id&&"text-primary"),showCategory:!a,name:n})}const vt="flex items-center flex-wrap gap-14";function Ii({data:s}){const t=ze(),{streaming:a}=B(),n=s==null?void 0:s.title,i=s==null?void 0:s.episode,l=s==null?void 0:s.video,o=n&&i&&l&&(l.type==="embed"||l.type==="external");return!o&&!a.show_video_selector?null:e.jsxs("div",{className:"mt-14 flex items-start justify-between gap-48",children:[a.show_video_selector&&e.jsxs(c.Fragment,{children:[e.jsx(Ti,{className:"lg:hidden",videos:(s==null?void 0:s.alternative_videos)||[]}),e.jsx("div",{className:"max-lg:hidden",children:e.jsx(Q,{initial:!1,mode:"wait",children:s?e.jsx(Fi,{videos:s.alternative_videos}):e.jsx($i,{})})})]}),o&&e.jsx(Ea,{title:n,currentEpisode:i,onSelected:d=>{t(X(d.primary_video))},trigger:e.jsx(f,{variant:"outline",className:"min-h-40",startIcon:e.jsx(qa,{}),children:e.jsx(r,{message:"All episodes"})})})]})}function Ti({videos:s,className:t}){const a=ze();return e.jsxs(G,{children:[e.jsx(f,{variant:"outline",className:h("min-h-40",t),startIcon:e.jsx(ce,{}),children:e.jsx(r,{message:"Other sources"})}),e.jsx(Y,{children:s.map(n=>e.jsx(T,{value:n.id,startIcon:e.jsx(ce,{}),endSection:e.jsx(bt,{video:n}),onSelected:()=>a(X(n)),children:n.name},n.id))})]})}function Fi({videos:s}){const{videoId:t}=z();return s.length<2?null:e.jsx(_.div,{className:vt,...F,children:s.map(a=>e.jsxs(f,{elementType:N,to:X(a),variant:"outline",color:t===`${a.id}`?"primary":"chip",startIcon:e.jsx(ce,{"aria-hidden":!0}),className:"min-h-40 gap-10",children:[a.name,e.jsx(bt,{video:a})]},a.id))},"alternative-sources")}function bt({video:s}){return!s.quality||s.quality==="default"?null:e.jsx("span",{className:"rounded border px-6 text-xs font-bold uppercase",children:s.quality})}function $i(){return e.jsxs(_.div,{className:h(vt,"h-40"),...F,children:[e.jsx(v,{variant:"rect",size:"h-full w-[116px]"}),e.jsx(v,{variant:"rect",size:"h-full w-[116px]"}),e.jsx(v,{variant:"rect",size:"h-full w-[116px]"}),e.jsx(v,{variant:"rect",size:"h-full w-[116px]"}),e.jsx(v,{variant:"rect",size:"h-full w-[116px]"})]},"skeletons")}function Yl(){const s=Ot();return Ba(),e.jsxs(c.Fragment,{children:[e.jsx(Aa,{}),e.jsx("div",{style:s,className:"dark min-h-screen bg text",children:e.jsxs("div",{className:"container mx-auto p-14 md:p-24",children:[e.jsx(Ri,{}),e.jsx(Ds,{className:"mt-48"})]})})]})}function Ri(){const{titles:s,comments:t}=B(),{isLoggedIn:a,hasPermission:n}=w(),i=Ue(),{data:l,isLoading:o}=i,d=l==null?void 0:l.title,m=l==null?void 0:l.episode,u=l==null?void 0:l.video;let x=u;t!=null&&t.per_video||(x=m||d);const j=d&&u&&s.enable_comments&&n("comments.view");return l||o?e.jsxs(c.Fragment,{children:[e.jsx($,{query:i}),e.jsx(Mi,{data:l}),e.jsx(Ii,{data:l}),e.jsx(as,{slot:"watch_top",className:"pt-48"}),e.jsxs("section",{className:"mt-42 items-start gap-56 lg:flex",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsx(Ci,{}),j&&e.jsx(Ni,{commentable:x,className:"mt-44",perPage:20,children:a&&n("comments.create")&&e.jsx(ht,{commentable:x,className:"mb-14 mt-24"})})]}),e.jsx(_i,{})]})]},(u==null?void 0:u.id)||"loading"):e.jsx(Ht,{})}function Mi({data:s}){const t=ue(),{hasPermission:a}=w(),[n,i]=c.useState(!1);return Je(()=>{i(!0)},[]),e.jsx(Q,{initial:!1,mode:"wait",children:s!=null&&s.video&&n?e.jsx(_.div,{...F,children:a("videos.play")?e.jsx(Ua,{title:s.title,episode:s.episode,video:s.video,relatedVideos:s.related_videos,autoPlay:!0,logPlays:!0,showEpisodeSelector:t}):e.jsx(Di,{video:s.video})},"player"):e.jsx(_.div,{className:"relative",...F,children:e.jsx(Va,{animate:!0})},"skeleton")})}function Di({video:s}){return e.jsxs("div",{className:"relative flex aspect-video items-center justify-center bg-alt",children:[e.jsx("div",{className:"blur",children:e.jsx(Wa,{video:s})}),e.jsxs("div",{className:"absolute h-max w-max max-w-full rounded-lg bg-black/60 p-24 text-lg font-medium",children:[e.jsx("div",{children:e.jsx(r,{message:"Your current plan does not allow watching videos. Upgrade to unlock this feature."})}),e.jsx("div",{className:"mt-14 text-center",children:e.jsx(f,{variant:"flat",color:"primary",elementType:N,to:"/pricing",children:e.jsx(r,{message:"Upgrade"})})})]})]})}function Nt({images:s,count:t,heading:a,srcSize:n}){const i=ge(),{trans:l}=ae();return s!=null&&s.length?(t||(t=i?6:5),e.jsxs("div",{className:"mt-48",children:[a,e.jsx("div",{className:"grid grid-cols-3 gap-12 md:grid-cols-5 md:gap-24",children:s.slice(0,t).map((o,d)=>e.jsxs(ve,{type:"modal",children:[e.jsx(Es,{"aria-label":l(g("Image :index",{values:{index:d}})),children:e.jsx(Ei,{image:o,srcSize:n})}),e.jsx(Oa,{images:s.map(m=>m.url),defaultActiveIndex:d})]},o.id))})]})):null}function Ei({image:s,srcSize:t="md"}){const a=Ks(s.url,{size:t});return e.jsx("img",{className:"aspect-square w-full cursor-pointer rounded object-cover",src:a,alt:""})}function ms({credits:s,className:t}){return s.length?e.jsx("div",{className:h("title-credits-grid grid gap-14 md:gap-20",t),children:s.map(a=>e.jsxs("div",{className:"flex items-center gap-14 md:gap-20",children:[e.jsx(Ne,{rounded:!0,person:a,size:"w-70 md:w-96",srcSize:"md"}),e.jsxs("div",{className:"max-md:text-sm",children:[e.jsx(se,{className:"block font-bold",person:a}),e.jsx("div",{className:"text-muted",children:e.jsx(qi,{credit:a})})]})]},a.pivot.id))}):e.jsx("div",{className:"italic text-muted",children:e.jsx(r,{message:"We've no cast information for this title yet."})})}function qi({credit:s}){return s.pivot.department==="actors"?e.jsx(c.Fragment,{children:s.pivot.character}):e.jsx("span",{className:"capitalize",children:e.jsx(r,{message:s.pivot.job})})}function yt({credits:s=[]}){const t=s.filter(a=>a.pivot.department==="actors");return e.jsxs("div",{className:"mt-48",children:[e.jsx(y,{children:e.jsx(r,{message:"Cast"})}),e.jsx(ms,{credits:t}),e.jsx(f,{className:"mt-24",variant:"outline",color:"primary",elementType:N,to:"full-credits",endIcon:e.jsx(Ha,{}),children:e.jsx(r,{message:"All cast and crew"})})]})}function Bi(s){return ne({queryKey:["titles",s,"related"],queryFn:()=>Ai(s)})}function Ai(s){return k.get(`titles/${s}/related`).then(t=>t.data)}function wt({title:s}){const{data:t}=Bi(s.id);return!t||t.titles.length===0?null:e.jsx(Ui,{titles:t.titles})}function Ui({titles:s}){const{scrollContainerRef:t,canScrollForward:a,canScrollBackward:n,scrollToPreviousPage:i,scrollToNextPage:l,containerClassName:o,itemClassName:d}=cs();return e.jsxs("div",{className:"mt-48",children:[e.jsx(y,{actions:e.jsxs(c.Fragment,{children:[e.jsx(C,{disabled:!n,onClick:()=>i(),"aria-label":"Scroll left",children:e.jsx($s,{})}),e.jsx(C,{disabled:!a,onClick:()=>l(),"aria-label":"Scroll right",children:e.jsx(ls,{})})]}),children:e.jsx(r,{message:"More like this"})}),e.jsx("div",{ref:t,className:h(o,"content-grid-portrait"),children:s.map(m=>e.jsx("div",{className:d,children:e.jsx(qe,{item:m})},m.id))})]})}function Vi({data:{title:s,seasons:t}}){const a=Ka(s.id,t);return e.jsxs("div",{className:"mt-48",children:[e.jsx(y,{titleAppend:t!=null&&t.total?`(${t.total})`:void 0,children:e.jsx(r,{message:"Seasons"})}),e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-4 gap-14 sm:grid-cols-6 lg:grid-cols-8",children:a.items.map(n=>e.jsxs("div",{children:[e.jsx(Qa,{title:s,season:n,srcSize:"sm",className:"aspect-poster flex-shrink-0"}),e.jsxs("div",{className:"mt-4",children:[e.jsx(Qs,{className:"text-sm",title:s,seasonNumber:n.number,color:"primary"}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(L,{timezone:"utc",date:n.release_date,options:{year:"numeric"}})})]})]},n.id))}),e.jsx(R,{query:a,variant:"loadMore",loaderMarginTop:"mt-14",size:"sm"})]})]})}const St=c.memo(({credits:s={}})=>{var t,a,n,i;return e.jsxs("div",{className:"mt-16 flex flex-col gap-14 border-t pt-16",children:[(t=s.creators)!=null&&t.length?e.jsx(Pe,{label:e.jsx(r,{message:"Created by"}),children:e.jsx(I,{className:"hidden-scrollbar overflow-x-auto",children:s.creators.slice(0,3).map(l=>e.jsx(se,{person:l,color:"primary",className:"whitespace-nowrap"},l.id))})}):null,(a=s.directing)!=null&&a.length?e.jsx(Pe,{label:e.jsx(r,{message:"[one Director|other Directors]",values:{count:s.directing.length}}),children:e.jsx(I,{className:"hidden-scrollbar overflow-x-auto",children:s.directing.slice(0,3).map(l=>e.jsx(se,{person:l,color:"primary",className:"whitespace-nowrap"},l.id))})}):null,(n=s.writing)!=null&&n.length?e.jsx(Pe,{label:e.jsx(r,{message:"[one Writer|other Writers]",values:{count:s.writing.length}}),children:e.jsx(I,{className:"hidden-scrollbar overflow-x-auto",children:s.writing.slice(0,3).map(l=>e.jsx(se,{person:l,color:"primary",className:"whitespace-nowrap"},l.id))})}):null,(i=s.actors)!=null&&i.length?e.jsx(Pe,{label:e.jsx(r,{message:"Stars"}),children:e.jsx(I,{className:"hidden-scrollbar overflow-x-auto",children:s.actors.slice(0,3).map(l=>e.jsx(se,{person:l,color:"primary",className:"whitespace-nowrap"},l.id))})}):null]})});function Pe({label:s,children:t}){return e.jsxs("div",{className:"flex-shrink-0 gap-24 md:flex",children:[e.jsx("div",{className:"min-w-84 font-bold",children:s}),e.jsx("div",{children:t})]})}function Ct(s,{absolute:t}={}){return he(`/genre/${s.name}`,{absolute:t})}function Wi(s){return ne({queryKey:["titles",`${s}`,"news"],queryFn:()=>Oi(s)})}function Oi(s){return k.get(`titles/${s}/news`).then(t=>t.data)}function Hi({title:s}){const{data:t,isLoading:a}=Wi(s.id);return!a&&!(t!=null&&t.news_articles.length)?null:e.jsxs("section",{className:"mt-48",children:[e.jsx(y,{children:e.jsx(r,{message:"Related news"})}),e.jsx("div",{className:"grid grid-cols-2 gap-24",children:t==null?void 0:t.news_articles.map(n=>e.jsx(dt,{article:n},n.id))})]})}const Ki=c.forwardRef(({reviewable:s,currentReview:t,className:a,disabled:n},i)=>{const[l,o]=c.useState(!1),{user:d}=w(),m=qs({defaultValues:{score:8}});c.useEffect(()=>{t&&(m.setValue("title",t.title),m.setValue("body",t.body),m.setValue("score",t.score))},[m,t]);const u=c.useCallback(()=>{o(!0)},[]);c.useImperativeHandle(i,()=>({openReviewPanel:u}),[u]);const x=Ga(m);return e.jsxs(Bs,{className:h("rounded border bg-alt p-14",a),form:m,onSubmit:j=>{n||x.mutate({...j,reviewable:s},{onSuccess:()=>{q(g("Review posted")),o(!1)}})},children:[e.jsxs("div",{className:"items-center gap-24 lg:flex",children:[e.jsx(Ie,{size:"xl",circle:!0,src:d==null?void 0:d.image,label:d==null?void 0:d.name}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("div",{className:"mb-4 text-xs text-muted max-md:mt-10",children:e.jsx(r,{message:"Review as :name",values:{name:e.jsx("span",{className:"font-medium text",children:d==null?void 0:d.name})}})}),e.jsx(Ya,{readonly:n,className:"-ml-8 max-lg:mb-12",count:10,value:n?0:m.watch("score"),onValueChange:j=>{m.setValue("score",j)}})]}),!l&&e.jsx(f,{variant:"flat",color:"primary",onClick:()=>u(),disabled:!d||n,children:t?e.jsx(r,{message:"Update review"}):e.jsx(r,{message:"Add review"})})]}),l&&e.jsxs("div",{className:"mt-24",children:[e.jsx(K,{name:"title",className:"mb-24",label:e.jsx(r,{message:"Title"}),labelSuffix:e.jsx(r,{message:"10 character minimum"}),autoFocus:!0,minLength:10,required:!0}),e.jsx(K,{name:"body",label:e.jsx(r,{message:"Review"}),labelSuffix:e.jsx(r,{message:"100 character minimum"}),inputElementType:"textarea",rows:5,minLength:100,required:!0}),e.jsxs("div",{className:"mt-16 flex items-center justify-end gap-8",children:[e.jsx(f,{variant:"outline",className:"min-w-100",onClick:()=>{o(!1),m.reset(t)},children:e.jsx(r,{message:"Cancel"})}),e.jsx(f,{type:"submit",variant:"flat",color:"primary",className:"min-w-100",disabled:x.isPending,children:e.jsx(r,{message:"Post"})})]})]})]})});function Qi(s){return W({mutationFn:t=>Gi(t,s),onSuccess:()=>{q(g("Feedback submitted"))},onError:t=>H(t)})}function Gi(s,t){return k.post(`reviews/${t.id}/feedback`,{is_helpful:s.isHelpful}).then(a=>a.data)}function Ls({review:s,isShared:t,hideShareButton:a,avatar:n}){const i=ge(),l=c.useRef(null),o=c.useRef(!1);c.useEffect(()=>{t&&!o.current&&setTimeout(()=>{var m;(m=l.current)==null||m.scrollIntoView({behavior:"smooth"}),o.current=!0},50)},[t]);const d=s.user?e.jsx(te,{user:s.user,size:"xl",circle:!0}):e.jsx(Ie,{size:"xl",label:"User"});return e.jsxs("div",{ref:l,children:[t&&e.jsx("div",{className:"mb-8 mt-16 text-sm",children:e.jsx(r,{message:"Shared review"})}),e.jsxs("div",{className:h("group flex min-h-70 items-start gap-24 rounded py-18",t&&"mb-34 border bg-alt pl-12"),children:[!i&&(n||d),e.jsxs("div",{className:"flex-auto text-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-8",children:[s.user&&e.jsx(Xi,{user:s.user}),e.jsx("time",{className:"text-xs text-muted",children:e.jsx(Le,{date:s.created_at})})]}),e.jsx(Z,{className:"mb-8 mt-10",score:s.score}),s.title&&e.jsx("div",{className:"mb-8 text-base font-medium",children:s.title}),e.jsx("div",{className:"whitespace-break-spaces text-sm",children:s.body}),e.jsxs("div",{className:"mt-16 items-center gap-8 md:flex",children:[e.jsx(Ji,{review:s}),!a&&e.jsx(Yi,{review:s}),e.jsx(Zi,{review:s})]})]})]})]})}function Yi({review:s}){const{base_url:t}=B(),a=As(),n=`${t}${a.pathname}?reviewId=${s.id}`,[,i]=Ts(n);return e.jsx(Te,{label:e.jsx(r,{message:"Share"}),children:e.jsx(C,{className:"text-muted",onClick:()=>{i(),q(g("Review link copied to clipboard"))},children:e.jsx(Se,{})})})}function Ji({review:s}){const{user:t}=w(),a=Gs(),n=Qi(s),i=n.isPending||t!=null&&t.id===s.user_id,[l,o]=c.useState(s.helpful_count||1),[d,m]=c.useState(s.helpful_count+s.not_helpful_count||1);let u;s.current_user_feedback!=null&&(u=s.current_user_feedback?"helpful":"not_helpful");const[x,j]=c.useState(u);return e.jsxs("div",{className:"mr-auto flex flex-wrap items-center gap-6 max-md:mb-12",children:[e.jsx("div",{className:"text-xs text-muted",children:e.jsx(r,{message:":helpfulCount out of :total people found this helpful. Was this review helpful?",values:{helpfulCount:l,total:d}})}),e.jsxs("div",{className:"flex items-center gap-6 pb-2",children:[e.jsx(f,{variant:"link",className:h("uppercase",x==="helpful"&&"pointer-events-none"),color:x==="helpful"?"primary":void 0,disabled:i,onClickCapture:a,onClick:()=>n.mutate({isHelpful:!0},{onSuccess:()=>{o(b=>b+1),j("helpful"),x||m(b=>b+1)}}),children:e.jsx(r,{message:"Yes"})}),e.jsx("div",{className:"h-14 w-1 bg-divider"}),e.jsx(f,{variant:"link",className:h("uppercase",x==="not_helpful"&&"pointer-events-none"),color:x==="not_helpful"?"primary":void 0,disabled:i,onClickCapture:a,onClick:()=>n.mutate({isHelpful:!1},{onSuccess:()=>{o(b=>b-1),j("not_helpful"),x||m(b=>b+1)}}),children:e.jsx(r,{message:"No"})})]})]})}function Zi({review:s}){const{user:t,hasPermission:a}=w(),n=ds(s),i=gt(s),[l,o]=c.useState(s.current_user_reported),d=()=>{l?i.mutate(void 0,{onSuccess:()=>o(!1)}):n.mutate({},{onSuccess:()=>o(!0)})},m=Ja(),[u,x]=c.useState(!1),j=t&&s.user_id===t.id||a("reviews.delete"),b=D=>{x(!1),D&&m.mutate({reviewIds:[s.id]})};return e.jsxs(c.Fragment,{children:[e.jsxs(G,{children:[e.jsx(C,{className:"text-muted","aria-label":"More options",children:e.jsx(Os,{})}),e.jsxs(Y,{children:[e.jsx(T,{value:"report",onSelected:()=>d(),children:l?e.jsx(r,{message:"Remove report"}):e.jsx(r,{message:"Report review"})}),j&&e.jsx(T,{value:"delete",onSelected:()=>x(!0),children:e.jsx(r,{message:"Delete"})})]})]}),e.jsx(ve,{type:"modal",isOpen:u,onClose:D=>b(D),children:e.jsx(Ze,{isDanger:!0,title:e.jsx(r,{message:"Delete review?"}),body:e.jsx(r,{message:"Are you sure you want to delete this review?"}),confirm:e.jsx(r,{message:"Delete"})})})]})}function Xi({user:s}){const t=ge(),{auth:a}=c.useContext(pe),n="flex items-center gap-8 text-base font-medium";return a.getUserProfileLink?e.jsxs(c.Fragment,{children:[t&&e.jsx(te,{user:s,size:"sm",circle:!0}),e.jsx(N,{to:a.getUserProfileLink(s),className:h("hover:underline",n),children:s.name})]}):e.jsxs("div",{className:n,children:[t&&e.jsx(te,{user:s,size:"sm",circle:!0}),s.name]})}const er=g("Please <l>login</l> or <r>create account</r> to add a review");function sr({reviewable:s,disabled:t,noResultsMessage:a,showAccountRequiredMessage:n}){var u,x;const i=Ys(s),l=c.useRef(null),{user:o}=w(),d=(u=i.data)==null?void 0:u.pages[0].current_user_review,m=(x=i.data)==null?void 0:x.pages[0].shared_review;return e.jsxs("div",{children:[e.jsx(Ki,{className:"mb-14 md:-mx-14",reviewable:s,currentReview:d,ref:l,disabled:t}),e.jsxs("div",{children:[n&&e.jsx(pt,{message:er}),e.jsx(Q,{initial:!1,mode:"wait",children:i.isLoading?e.jsx(ar,{count:4}):e.jsx(tr,{reviews:i.items,sharedReview:m,noResultsMessage:a})}),e.jsx("div",{className:"ml-84",children:e.jsx(R,{query:i,variant:"loadMore",loaderMarginTop:"mt-14",loadMoreExtraContent:e.jsx(f,{variant:"flat",color:"primary",disabled:!o,onClick:()=>{var j;(j=l.current)==null||j.openReviewPanel()},children:e.jsx(r,{message:"Add a review"})})})})]})]})}function tr({reviews:s,sharedReview:t,noResultsMessage:a}){const{user:n}=w();let i;return s.length?i=s.map(l=>e.jsx(Ls,{review:l},l.id)):i=n?a||e.jsx(E,{className:"mt-24",size:"sm",title:e.jsx(r,{message:"Seems a little quiet over here"}),description:e.jsx(r,{message:"Be the first to leave a review"})}):null,e.jsxs(_.div,{...F,children:[t&&e.jsx(Ls,{review:t,isShared:!0}),i]},"reviews")}function ar({count:s}){return e.jsx(_.div,{...F,children:[...new Array(s).keys()].map(t=>e.jsxs("div",{className:"group flex min-h-[212px] items-start gap-24 py-18",children:[e.jsx(v,{variant:"avatar",radius:"rounded-full",size:"w-60 h-60"}),e.jsxs("div",{className:"flex-auto text-sm",children:[e.jsx(v,{className:"mb-4 max-w-200 text-base font-medium",variant:"text"}),e.jsx(v,{variant:"text",className:"mb-8 mt-10 max-w-60 text-lg"}),e.jsx(v,{variant:"text",className:"mb-8 max-w-240 text-base"}),e.jsx(v,{className:"text-sm",variant:"text"}),e.jsx(v,{className:"text-sm",variant:"text"}),e.jsx(v,{className:"mt-16 text-xs",variant:"text"})]})]},t))},"loading-skeleton")}function nr({title:s}){const[t,a]=Kt(`reviewSort.${s.model_type}`,"created_at:desc"),n=Ys(s);return e.jsxs("div",{className:"mt-48",children:[e.jsx(y,{titleAppend:n.totalItems?e.jsxs("span",{children:["(",n.totalItems,")"]}):null,actions:e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(Z,{score:s.rating,className:"max-md:hidden"}),e.jsx(Za,{value:t,onValueChange:i=>a(i)})]}),children:e.jsx(r,{message:"Reviews"})}),e.jsx(sr,{reviewable:s,showAccountRequiredMessage:s.status!=="upcoming",noResultsMessage:s.status==="upcoming"?e.jsx(E,{className:"mt-24",size:"sm",title:e.jsx(r,{message:"This title is not released yet"}),description:e.jsx(r,{message:"Come back after :date to see the reviews",values:{date:e.jsx(L,{date:s.release_date,timezone:"utc"})}})}):void 0})]})}function kt({title:s,episode:t}){const a=t?t.videos:s.videos,n=t?`${Xa(s,t.season_number,t.episode_number)}/videos`:`${Re(s)}/videos`;return e.jsx(ns,{videos:a,title:s,episode:t,heading:e.jsx(y,{link:n,children:e.jsx(r,{message:"Videos"})})})}function Pt({data:s,label:t,showSeasonSelector:a}){const{season:n}=z(),[i,l]=c.useState(n?parseInt(n):1),o=Js(s.episodes,{perPage:21,excludeDescription:"true"},{season:i,willSortOrFilter:!0,defaultOrderBy:"episode_number",defaultOrderDir:"asc",titleId:s.title.id}),{isInitialLoading:d,items:m,sortDescriptor:u,setSortDescriptor:x}=o;return e.jsxs("div",{className:"mt-48",children:[e.jsx(y,{wrap:!0,actions:e.jsxs(c.Fragment,{children:[a&&e.jsx(or,{selectedSeason:i,onSeasonChange:l,seasonCount:s.title.seasons_count}),e.jsx(cr,{value:`${u.orderBy}:${u==null?void 0:u.orderDir}`,onValueChange:j=>{const[b,D]=j.split(":");x({orderBy:b,orderDir:D})}})]}),children:t||e.jsx(r,{message:"Episodes"})}),e.jsx(Q,{initial:!1,mode:"wait",children:d?e.jsx(lr,{}):e.jsx(rr,{episodes:m,title:s.title,query:o})})]})}function ir({episode:s,title:t}){const a=s.runtime||t.runtime,n=e.jsxs(c.Fragment,{children:[e.jsx(ye,{className:"uppercase",episode:s})," -"," ",s.name]});return e.jsxs("div",{children:[e.jsx("div",{className:"relative",children:e.jsx(Zs,{episode:s,title:t,srcSize:"md",showPlayButton:!0,rightAction:a?e.jsx("span",{className:"rounded bg-black/50 p-4 text-xs font-medium text-white",children:e.jsx(we,{minutes:a,verbose:!0})}):null})}),e.jsxs("div",{className:"mt-10",children:[s.release_date&&e.jsx("div",{className:"mb-2 text-sm text-muted",children:e.jsx(L,{date:s.release_date,timezone:"utc"})}),e.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-base",children:s.primary_video?e.jsx(N,{className:"rounded outline-none hover:underline focus-visible:ring focus-visible:ring-offset-2",to:X(s.primary_video),children:n}):n})]})]})}function rr({title:s,episodes:t,query:a}){return e.jsxs(_.div,{...F,children:[e.jsx(Ce,{variant:"landscape",children:t.map(n=>e.jsx(ir,{episode:n,title:s},n.id))}),e.jsx(R,{query:a,variant:"loadMore",size:"sm",loaderMarginTop:"mt-16"})]},"episode-grid")}function lr(){return e.jsx(_.div,{...F,children:e.jsx(Ce,{variant:"landscape",children:[...new Array(6).keys()].map(s=>e.jsxs("div",{children:[e.jsx(v,{variant:"rect",size:"aspect-video",animation:"pulsate"}),e.jsxs("div",{className:"mt-10 min-h-44",children:[e.jsx(v,{variant:"text"}),e.jsx(v,{variant:"text"})]})]},s))})},"episode-grid")}function or({selectedSeason:s,onSeasonChange:t,seasonCount:a}){return e.jsxs(G,{selectedValue:s,onSelectionChange:n=>t(n),selectionMode:"single",children:[e.jsx(f,{variant:"outline",startIcon:e.jsx(bn,{}),className:"mr-4",children:e.jsx(r,{message:"Season :number",values:{number:s}})}),e.jsx(Y,{children:[...new Array(a).keys()].map(n=>{const i=n+1;return e.jsx(T,{value:i,children:e.jsx(r,{message:"Season :number",values:{number:i}})},i)})})]})}const He=[{value:"episode_number:desc",label:g("Newest")},{value:"episode_number:asc",label:g("Oldest")}];function cr({value:s,onValueChange:t}){let a=He.find(n=>n.value===s);return a||(a=He[0]),e.jsxs(G,{selectedValue:s,onSelectionChange:n=>t(n),selectionMode:"single",children:[e.jsx(f,{variant:"outline",startIcon:e.jsx(Ge,{}),children:e.jsx(r,{...a.label})}),e.jsx(Y,{children:He.map(n=>e.jsx(T,{value:n.value,children:e.jsx(r,{...n.label})},n.value))})]})}function _t(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dr(s){return s.replace(/"/g,"&quot;")}function mr(s){const t=[];for(const a in s){let n=s[a]+"";t.push(`${a}="${dr(n)}"`)}return t.join(" ")}function ur(s){let{tagName:t,attributes:a,content:n}=s;return`<${t} ${mr(a)}>${_t(n)}</${t}>`}function Lt(s,t){t===void 0&&(t={}),t=new Sn(t,ur);const a=Cn(s),n=[];for(let i=0;i<a.length;i++){const l=a[i];l.t==="nl"&&t.get("nl2br")?n.push(`<br>
`):!l.isLink||!t.check(l)?n.push(_t(l.toString())):n.push(t.render(l))}return n.join("")}String.prototype.linkify||Object.defineProperty(String.prototype,"linkify",{writable:!1,value:function(t){return Lt(this,t)}});function xr(s){return c.useMemo(()=>s&&Lt(s,{nl2br:!0,attributes:{rel:"nofollow"}}),[s])}function us({description:s,className:t}){const a=xr(s),n=c.useRef(null),i=c.useRef(null),[l,o]=c.useState(!1),[d,m]=c.useState(!1);return Je(()=>{var j,b;const u=((j=n.current)==null?void 0:j.getBoundingClientRect().height)||0;(((b=n.current)==null?void 0:b.scrollHeight)||0)>u&&o(!0)},[]),a?e.jsxs(c.Fragment,{children:[e.jsx("div",{ref:n,className:h("relative",t,!d&&"max-h-160 overflow-hidden",!d&&l&&"after:absolute after:bottom-0 after:left-0 after:h-20 after:w-full after:bg-gradient-to-b after:from-transparent after:to-background"),children:e.jsx("div",{ref:i,dangerouslySetInnerHTML:{__html:a}})}),l&&e.jsx(f,{size:"xs",className:"mt-20",variant:"outline",onClick:()=>m(!d),children:d?e.jsx(r,{message:"Show less"}):e.jsx(r,{message:"Show more"})})]}):null}function jr({data:s,className:t}){var l,o;const{title:a,credits:n}=s,{title_page:i}=B();return e.jsxs("main",{className:h(t,"@container"),children:[(l=a.genres)!=null&&l.length?e.jsx(Xs,{children:a.genres.map(d=>e.jsx(Xe,{className:"capitalize",elementType:N,to:Ct(d),children:e.jsx(r,{message:d.display_name||d.name})},d.id))}):null,a.tagline&&e.jsxs("blockquote",{className:"mt-16",children:["“",a.tagline,"”"]}),e.jsx(us,{className:"mt-16",description:a.description}),e.jsx(St,{credits:n}),e.jsx(as,{slot:"title_top",className:"pt-48"}),(o=i==null?void 0:i.sections)==null?void 0:o.map(d=>e.jsx(hr,{name:d,title:a,data:s},d))]})}function hr({name:s,title:t,data:a}){var l;const{titles:n}=B(),{hasPermission:i}=w();switch(s){case"episodes":return t.is_series?e.jsx(Pt,{data:a,showSeasonSelector:!0}):null;case"seasons":return t.is_series?e.jsx(Vi,{data:a}):null;case"videos":return e.jsx(kt,{title:t});case"images":return e.jsx(Nt,{images:t.images,heading:e.jsx(y,{link:`${Re(t)}/images`,children:e.jsx(r,{message:"Images"})})});case"reviews":return n.enable_reviews&&i("reviews.view")?e.jsx(nr,{title:t}):null;case"cast":return e.jsx(yt,{credits:(l=a.credits)==null?void 0:l.actors});case"news":return e.jsx(Hi,{title:t});case"related":return e.jsx(wt,{title:t})}}function xs({name:s,description:t,children:a,right:n,poster:i}){return e.jsxs("div",{className:"mb-24 items-center justify-between gap-24 lg:flex",children:[i,e.jsxs("div",{className:"flex-auto",children:[a,e.jsx("h1",{className:"mb-12 text-4xl md:mb-8 md:text-5xl",children:s}),t&&e.jsx("div",{className:"text-base font-normal",children:t})]}),n]})}function js(){const{user:s}=w();return ne({queryKey:["channel","watchlist","compact"],queryFn:()=>pr(),enabled:!!s})}function fr(s){var a,n,i;const t=js();return{isLoading:t.isLoading&&t.fetchStatus!=="idle",isWatchlisted:!!((i=(n=(a=t.data)==null?void 0:a.watchlist)==null?void 0:n.items[s.model_type])!=null&&i[s.id])}}function pr(){return k.get("users/me/watchlist").then(s=>s.data)}function gr(){const{data:s}=js();return W({mutationFn:t=>vr(s.watchlist.id,t),onSuccess:async()=>{await ie.invalidateQueries({queryKey:["channel","watchlist"]}),q(g("Added to your watchlist"))},onError:t=>H(t)})}function vr(s,t){return k.post(`channel/${s}/add`,{itemId:t.id,itemType:t.model_type}).then(a=>a.data)}function br(){const{data:s}=js();return W({mutationFn:t=>Nr(s.watchlist.id,t),onSuccess:async()=>{await ie.invalidateQueries({queryKey:["channel","watchlist"]}),q(g("Removed from your watchlist"))},onError:t=>H(t)})}function Nr(s,t){return k.post(`channel/${s}/remove`,{itemId:t.id,itemType:t.model_type}).then(a=>a.data)}function hs({item:s,variant:t="flat",color:a="primary",size:n="lg",className:i}){const{isLoading:l,isWatchlisted:o}=fr(s),d=gr(),m=br(),u=Gs();return e.jsx(f,{variant:t,color:a,size:n==="sm"?"xs":void 0,className:h(n==="lg"&&"mt-14 min-h-40 w-full",i),startIcon:o?e.jsx(Qt,{}):e.jsx(et,{}),disabled:d.isPending||m.isPending||l,onClickCapture:u,onClick:()=>{o?m.mutate(s):d.mutate(s)},children:o?e.jsx(r,{message:"In watchlist"}):n==="sm"?e.jsx(r,{message:"Watchlist"}):e.jsx(r,{message:"Add to watchlist"})})}function Ve({title:s,showPoster:t=!1}){return e.jsx(xs,{name:e.jsx(O,{title:s}),poster:t?e.jsx(A,{title:s,size:"w-80",srcSize:"sm"}):null,description:e.jsx("div",{children:e.jsxs(I,{children:[e.jsx(L,{date:s.release_date,timezone:"utc"}),s.certification&&e.jsx("div",{className:"uppercase",children:s.certification}),s.runtime&&e.jsx(we,{minutes:s.runtime,verbose:!0})]})}),right:e.jsxs("div",{className:"flex items-center justify-between gap-10 max-md:mt-10 max-md:flex-wrap",children:[e.jsx(ts,{title:s}),e.jsx(hs,{item:s,size:"sm",className:"md:hidden"})]})})}function ee({title:s,season:t,episode:a}){const{streaming:n}=B(),i=a||t||s;if(!((a==null?void 0:a.poster)||s.backdrop))return null;const o=e.jsx(Fe,{title:s,episode:a,size:"w-full h-full",className:"object-top",lazy:!1});return e.jsxs("header",{className:"relative isolate max-h-320 overflow-hidden bg-black md:max-h-400 lg:max-h-450",children:[e.jsx("div",{className:"container relative left-0 right-0 top-0 z-20 mx-auto h-full w-full px-24",children:o}),e.jsx("div",{className:"h-[calc(100% + 20px)] absolute left-1/2 top-1/2 z-10 w-[calc(100%+100px)] -translate-x-1/2 -translate-y-1/2 bg-black opacity-50 blur-md",children:o}),e.jsx("div",{className:"pointer-events-none absolute left-0 top-0 z-30 h-full w-full bg-gradient-to-b from-black/20 md:from-black/40"}),n!=null&&n.show_header_play&&(i!=null&&i.primary_video)?e.jsx(yr,{item:i}):null]})}function yr({item:s}){const t=X(s.primary_video);return e.jsx(C,{radius:"rounded-full",color:"white",variant:"raised",size:"lg",className:"absolute inset-0 z-40 m-auto",elementType:N,to:t,children:e.jsx(ce,{})})}function fs({poster:s,children:t,className:a}){return e.jsxs("div",{className:h("top-40 flex-shrink-0 md:sticky md:w-1/4",a),children:[s,e.jsx("div",{className:"flex-auto max-md:ml-16 max-md:text-sm",children:t})]})}function U({label:s,children:t}){return e.jsxs(c.Fragment,{children:[e.jsx("dt",{className:"font-semibold",children:s}),e.jsx("dl",{className:"mb-12 md:mb-24",children:t})]})}function wr({keyword:s,children:t,...a}){const n=c.useMemo(()=>Sr(s),[s]);return e.jsx(es,{...a,link:n,children:t??e.jsx(r,{message:s.display_name||s.name})})}function Sr(s,{absolute:t}={}){return he(`/keyword/${s.name}`,{absolute:t})}function Cr({country:s,children:t,...a}){const n=c.useMemo(()=>kr(s),[s]);return e.jsx(es,{...a,link:n,children:t??(s.display_name||s.name)})}function kr(s,{absolute:t}={}){return he(`/production-countries/${s.name}`,{absolute:t})}function zt({video:s,variant:t="outline",color:a="primary",size:n="w-full min-h-40 mt-14",defaultLabel:i}){const l=s.episode_num&&!i?e.jsxs("span",{className:"inline-flex gap-4",children:[e.jsx(r,{message:"Start watching"}),e.jsx(ye,{seasonNum:s.season_num,episodeNum:s.episode_num})]}):e.jsx(r,{message:"Watch now"});return e.jsx(f,{to:X(s),elementType:N,startIcon:e.jsx(ce,{}),color:a,variant:t,className:n,children:l})}function Pr({data:{title:s,language:t},className:a}){var l,o;const n=ue(),{hasPermission:i}=w();return e.jsxs(fs,{className:a,poster:e.jsxs("div",{className:"relative",children:[e.jsx(A,{title:s,size:"w-full",srcSize:"lg"}),i("titles.update")&&e.jsx(C,{elementType:N,to:`/admin/titles/${s.id}/edit`,className:"absolute bottom-6 right-4",color:"white",children:e.jsx(os,{})})]}),children:[n&&s.primary_video&&e.jsx(zt,{video:s.primary_video,variant:"flat"}),e.jsx(hs,{item:s,variant:n?"outline":"flat"}),e.jsx(_r,{title:s}),e.jsxs("dl",{className:"mt-14",children:[t&&e.jsx(U,{label:e.jsx(r,{message:"Original language"}),children:e.jsx(r,{message:t})}),s.original_title!==s.name&&e.jsx(U,{label:e.jsx(r,{message:"Original title"}),children:s.original_title}),s.budget?e.jsx(U,{label:e.jsx(r,{message:"Budget"}),children:e.jsx(bs,{value:s.budget,currency:"usd"})}):null,s.revenue?e.jsx(U,{label:e.jsx(r,{message:"Revenue"}),children:e.jsx(bs,{value:s.revenue,currency:"usd"})}):null,(l=s.production_countries)!=null&&l.length?e.jsx(U,{label:e.jsx(r,{message:"Production countries"}),children:e.jsx("ul",{className:"mt-12 flex flex-wrap gap-8",children:s.production_countries.map(d=>e.jsx("li",{className:"w-max rounded-full border px-10 py-4 text-xs",children:e.jsx(Cr,{country:d})},d.id))})}):null,(o=s.keywords)!=null&&o.length?e.jsx(U,{label:e.jsx(r,{message:"Keywords"}),children:e.jsx("ul",{className:"mt-12 flex flex-wrap gap-8",children:s.keywords.map(d=>e.jsx("li",{className:"w-max rounded-full border px-10 py-4 text-xs",children:e.jsx(wr,{keyword:d})},d.id))})}):null]})]})}function _r({title:s}){const t=Re(s,{absolute:!0});return e.jsx(De,{link:t,children:e.jsx(f,{variant:"outline",color:"primary",startIcon:e.jsx(Se,{}),className:"mt-14 min-h-40 w-full",children:e.jsx(r,{message:"Share"})})})}function Jl(){const s=Me("titlePage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Lr,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Lr({data:s}){return e.jsxs(c.Fragment,{children:[e.jsx(ee,{title:s.title}),e.jsx("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:e.jsxs("div",{className:"items-start gap-54 md:flex",children:[e.jsx(Pr,{data:s,className:"max-lg:hidden"}),e.jsxs("div",{className:"flex-auto",children:[e.jsx(Ve,{title:s.title}),e.jsx(jr,{data:s})]})]})})]})}function Zl(){const s=Me("titlePage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(zr,{title:s.data.title})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function zr({title:s}){return e.jsxs("div",{children:[e.jsx(ee,{title:s}),e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsx(Ve,{title:s,showPoster:!0}),e.jsx(ns,{videos:s.videos,title:s,count:24,heading:e.jsx(y,{children:e.jsx(r,{message:"Video gallery"})})})]})]})}function Xl(){const s=Me("titlePage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Ir,{title:s.data.title})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Ir({title:s}){return e.jsxs("div",{children:[e.jsx(ee,{title:s}),e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsx(Ve,{title:s,showPoster:!0}),e.jsx(Nt,{images:s.images,srcSize:"lg",count:50,heading:e.jsx(y,{children:e.jsx(r,{message:"Image gallery"})})})]})]})}function eo(){const s=Me("titleCreditsPage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Tr,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Tr({data:{title:s,credits:t={}}}){return e.jsxs("div",{children:[e.jsx(ee,{title:s}),e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsx(Ve,{title:s,showPoster:!0}),e.jsxs("div",{className:"mt-48 @container",children:[e.jsx(y,{headingType:"h2",className:"mb-40",children:e.jsx(r,{message:"Full cast and crew"})}),Object.entries(t).map(([a,n])=>e.jsxs("div",{children:[e.jsx("h3",{className:"mb-16 text-2xl font-bold capitalize",children:e.jsx(r,{message:a})}),e.jsx(ms,{credits:n,className:"mb-68"})]},a))]})]})]})}function so(){const s=en("seasonPage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Fr,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Fr({data:s}){const{title:t,season:a}=s;return e.jsxs("div",{children:[e.jsx(ee,{title:t,season:a}),e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsxs("div",{className:"mb-24 flex items-center gap-12",children:[e.jsx(A,{size:"w-70",srcSize:"sm",title:t}),e.jsxs("div",{children:[e.jsx(O,{title:t,color:"primary",className:"text-xl"}),e.jsx("div",{className:"text-lg",children:e.jsx(r,{message:"Episode list"})})]})]}),e.jsx(zs,{title:t}),e.jsx($r,{data:s}),e.jsx(zs,{title:t})]})]})}function zs({title:s}){const{season:t}=z();return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 text-base font-semibold",children:[e.jsx(r,{message:"Seasons"}),":"]}),e.jsx("div",{className:"mb-34 flex flex-wrap items-center gap-10",children:[...new Array(s.seasons_count).keys()].map(a=>{const n=a+1,i=t===`${n}`;return e.jsx(Qs,{title:s,seasonNumber:n,className:h("flex h-30 w-30 flex-shrink-0 items-center justify-center rounded border text-base",i?"pointer-events-none bg-primary text-white":"text-primary"),children:n},n)})})]})}function $r({data:{episodes:s,title:t}}){const a=Js(s);return e.jsxs("main",{children:[a.items.map(n=>e.jsx(sn,{episode:n,title:t,allowRating:!0,showPlayButton:!0,className:"mb-34"},n.id)),e.jsx(R,{query:a})]})}function ps({title:s,episode:t,showPoster:a}){const n=ze(),i=t.runtime||s.runtime;return e.jsx(xs,{poster:a?e.jsx(A,{title:s,size:"w-80",srcSize:"sm"}):void 0,name:t.name,description:e.jsxs(I,{className:"my-10 md:my-0",children:[e.jsx(r,{message:"Aired :date",values:{date:e.jsx(L,{date:t.release_date,timezone:"utc"})}}),s.certification&&e.jsx("span",{className:"uppercase",children:s.certification}),i?e.jsx(we,{minutes:i,verbose:!0}):null]}),right:e.jsx(ts,{title:s,episode:t}),children:e.jsxs(wn,{isNavigation:!0,children:[e.jsx(Oe,{onSelected:()=>n(Re(s)),children:s.name}),e.jsx(Oe,{onSelected:()=>n(tn(s,t.season_number)),children:e.jsx(r,{message:"Season :number",values:{number:t.season_number}})}),e.jsx(Oe,{children:e.jsx(r,{message:"Episode :number",values:{number:t.episode_number}})})]})})}function to(){const s=is("episodePage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Rr,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Rr({data:s}){const{episode:t,title:a}=s;return e.jsxs("div",{children:[e.jsx(ee,{title:a,episode:t}),e.jsx("div",{className:"container mx-auto mt-12 px-14 md:mt-40 md:px-24",children:e.jsxs("div",{className:"items-start gap-54 md:flex",children:[e.jsx(Er,{title:a,episode:t}),e.jsxs("div",{className:"flex-auto",children:[e.jsx(ps,{title:a,episode:t}),e.jsx(Mr,{data:s})]})]})})]})}function Mr({data:s}){var l;const{episode:t,title:a,credits:n}=s,{title_page:i}=B();return e.jsxs("main",{className:"@container",children:[(l=a.genres)!=null&&l.length?e.jsx(Xs,{children:a.genres.map(o=>e.jsx(Xe,{className:"capitalize",elementType:N,to:Ct(o),children:o.display_name||o.name},o.id))}):null,e.jsx(us,{className:"mt-16",description:t.description}),e.jsx(St,{credits:n}),i==null?void 0:i.sections.map(o=>e.jsx(Dr,{name:o,data:s},o))]})}function Dr({name:s,data:t}){var a;switch(s){case"videos":return e.jsx(kt,{title:t.title,episode:t.episode});case"cast":return e.jsx(yt,{credits:(a=t.credits)==null?void 0:a.actors});case"related":return e.jsx(wt,{title:t.title});case"episodes":return e.jsx(Pt,{data:t,label:e.jsx(r,{message:"Other episodes"})});default:return null}}function Er({title:s,episode:t}){const a=ue();return e.jsxs(fs,{className:"max-md:hidden",poster:e.jsx(A,{title:s,size:"w-full",srcSize:"lg"}),children:[a&&t.primary_video&&e.jsx(zt,{video:t.primary_video,variant:"flat",defaultLabel:!0}),e.jsx(hs,{item:s,variant:a?"outline":"flat"})]})}function ao(){const s=is("episodePage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(qr,{title:s.data.title,episode:s.data.episode})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function qr({episode:s,title:t}){return e.jsxs("div",{children:[e.jsx(ee,{title:t,episode:s}),e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsx(ps,{title:t,episode:s,showPoster:!0}),e.jsx(ns,{videos:s.videos,title:t,episode:s,count:24,heading:e.jsx(y,{children:e.jsx(r,{message:"Video gallery"})})})]})]})}function no(){const s=is("episodeCreditsPage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Br,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Br({data:{title:s,episode:t,credits:a}}){return e.jsxs("div",{children:[e.jsx(ee,{title:s,episode:t}),e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsx(ps,{title:s,episode:t,showPoster:!0}),e.jsxs("div",{className:"mt-48 @container",children:[e.jsx(y,{headingType:"h2",className:"mb-40",children:e.jsx(r,{message:"Full cast and crew"})}),a&&Object.entries(a).map(([n,i])=>e.jsxs("div",{children:[e.jsx("h3",{className:"mb-16 text-2xl font-bold capitalize",children:e.jsx(r,{message:n})}),e.jsx(ms,{credits:i,className:"mb-68"})]},n))]})]})]})}function Ar({data:{person:s,total_credits_count:t}}){const{hasPermission:a}=w(),n=e.jsx(r,{message:":count years old",values:{count:e.jsx(ct,{person:s})}});return e.jsx(fs,{className:"max-md:flex",poster:e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{person:s,size:"w-140 md:w-full",srcSize:"lg"}),a("titles.update")&&e.jsx(C,{elementType:N,to:`/admin/people/${s.id}/edit`,className:"absolute bottom-6 right-4",color:"white",children:e.jsx(os,{})})]}),e.jsx(Ur,{person:s})]}),children:e.jsxs("dl",{className:"mt-12 md:mt-24",children:[s.known_for&&e.jsx(U,{label:e.jsx(r,{message:"Known for"}),children:e.jsx(r,{message:s.known_for})}),s.gender&&e.jsx(U,{label:e.jsx(r,{message:"Gender"}),children:e.jsx("span",{className:"capitalize",children:e.jsx(r,{message:s.gender})})}),t?e.jsx(U,{label:e.jsx(r,{message:"Known credits"}),children:t}):null,s.birth_date?e.jsxs(U,{label:e.jsx(r,{message:"Born"}),children:[e.jsx(L,{date:s.birth_date,timezone:"utc"})," ",!s.death_date&&n?e.jsxs("span",{children:["(",n,")"]}):null]}):null,s.birth_place?e.jsx(U,{label:e.jsx(r,{message:"Birthplace"}),children:s.birth_place}):null,s.death_date?e.jsxs(U,{label:e.jsx(r,{message:"Died"}),children:[e.jsx(L,{date:s.death_date,timezone:"utc"})," (",n,")"]}):null]})})}function Ur({person:s}){const t=an(s,{absolute:!0});return e.jsx(De,{link:t,children:e.jsx(f,{variant:"outline",color:"primary",startIcon:e.jsx(Se,{}),className:"mt-14 md:min-h-40 md:w-full",children:e.jsx(r,{message:"Share"})})})}function Vr({person:s,credit:t,department:a},n){return ne({queryKey:["people",`${s.id}`,"full-credits",`${t.id}`,`${a}`],queryFn:()=>Wr(s.id,t.id,a),enabled:n.enabled})}function Wr(s,t,a){return k.get(`people/${s}/full-credits/${t}/${a}`).then(n=>n.data)}function gs({credit:s,className:t}){var a,n,i,l;return e.jsx("div",{className:t,children:((a=s.pivot)==null?void 0:a.department)==="actors"?((n=s.pivot)==null?void 0:n.character)??e.jsx(r,{message:"Unknown"}):e.jsx("span",{className:"capitalize",children:(i=s.pivot)!=null&&i.job?e.jsx(r,{message:(l=s.pivot)==null?void 0:l.job}):e.jsx(r,{message:"Unknown"})})})}function Or({data:{credits:s,person:t}}){return e.jsxs("div",{className:"mt-34",children:[e.jsx(y,{fontSize:"text-xl",children:e.jsx(r,{message:"Credits"})}),e.jsx(nn,{mode:"multiple",defaultExpandedValues:[0],isLazy:!0,children:Object.entries(s).map(([a,n])=>e.jsx(rn,{labelClassName:"font-semibold text-base",description:e.jsx(r,{message:"(:count credits)",values:{count:n.length}}),label:e.jsx("span",{className:"capitalize",children:e.jsx(r,{message:a==="actors"?"Acting":a})}),children:n.map((i,l)=>{var d;const o=i===n[n.length-1];return e.jsxs(c.Fragment,{children:[e.jsxs("div",{className:"flex items-start py-6",children:[e.jsx(A,{title:i,size:"w-40",className:"mr-12",lazy:!0,srcSize:"sm"}),e.jsxs("div",{className:"mr-24 pt-2",children:[e.jsx("div",{className:"text-base font-semibold",children:e.jsx(O,{title:i})}),e.jsx(gs,{className:"text-sm text-muted",credit:i}),i.credited_episode_count?e.jsx(Hr,{credit:i,department:a,person:t}):null]}),e.jsx("div",{className:"ml-auto text-sm text-muted",children:i.year})]}),!o&&i.year!==((d=n[l+1])==null?void 0:d.year)&&e.jsx("div",{className:"my-8 h-1 w-full bg-divider"})]},i.id)})},a))})]})}function Hr({credit:s,department:t,person:a}){var x;const[n,i]=c.useState(!1),l=Vr({person:a,department:t,credit:s},{enabled:n}),o=s.episodes.length===s.credited_episode_count||l.data!=null,d=l.isLoading&&l.fetchStatus!=="idle",m=d||!o,u=(x=l.data)!=null&&x.credits.length?l.data.credits:s.episodes;return e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{children:u.map(j=>e.jsx("div",{className:"mb-4 pl-10 text-xs",children:e.jsxs(I,{children:[e.jsxs("span",{children:["-"," ",e.jsx(Hs,{title:s,episode:j,seasonNumber:j.season_number})," ","(",j.year,")"]}),e.jsx(ye,{episode:j}),e.jsx(gs,{credit:j})]})},j.id))}),m&&e.jsx("div",{className:"mt-8",children:e.jsx(f,{size:"xs",disabled:d,onClick:()=>{i(!0)},children:e.jsx(r,{message:"Show all :count episodes",values:{count:s.credited_episode_count}})})})]})}function io(){const s=ln("personPage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Kr,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Kr({data:s}){const{person:t,knownFor:a}=s;return e.jsx(c.Fragment,{children:e.jsx("div",{className:"container mx-auto mt-14 px-14 md:mt-40 md:px-24",children:e.jsxs("div",{className:"items-start gap-54 md:flex",children:[e.jsx(Ar,{data:s}),e.jsxs("main",{className:"flex-auto @container max-md:mt-34",children:[e.jsx(xs,{name:t.name}),e.jsx(Qr,{person:t}),e.jsx(as,{slot:"person_top",className:"pt-48"}),e.jsx(Gr,{items:a}),e.jsx(Or,{data:s})]})]})})})}function Qr({person:s}){return s.description?e.jsxs(c.Fragment,{children:[e.jsx(y,{fontSize:"text-xl",children:e.jsx(r,{message:"Biography"})}),e.jsx(us,{className:"text-sm",description:s.description})]}):null}function Gr({items:s}){return s!=null&&s.length?e.jsxs("div",{className:"mt-34",children:[e.jsx(y,{fontSize:"text-xl",children:e.jsx(r,{message:"Known for"})}),e.jsx(Ce,{variant:"portrait",children:s.slice(0,4).map(t=>e.jsx(qe,{item:t,description:e.jsx(gs,{className:"text-muted",credit:t})},t.id))})]}):null}function ro(){const s=on("newsArticlePage"),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(Yr,{data:s.data})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function Yr({data:{article:s,related:t}}){return e.jsxs("div",{className:"container mx-auto mt-14 items-start gap-40 px-14 md:mt-40 md:px-24 lg:flex",children:[e.jsxs("main",{className:"mb-24 flex-auto rounded border p-16",children:[e.jsx("h1",{className:"mb-24 text-3xl md:text-4xl",children:s.title}),e.jsxs("div",{className:"items-start gap-16 md:flex",children:[e.jsx(de,{article:s,size:"w-184 h-184",className:"max-md:mb-24"}),e.jsx("div",{className:"prose text dark:prose-invert",dangerouslySetInnerHTML:{__html:s.body}})]}),e.jsxs(I,{className:"mt-24 text-sm text-muted",children:[e.jsx(L,{date:s.created_at}),s.byline?e.jsx(Ae,{article:s}):null,s.source?e.jsx(Be,{article:s}):null]})]}),e.jsx(Jr,{articles:t})]})}function Jr({articles:s}){return e.jsxs("div",{className:"w-full max-w-full flex-shrink-0 lg:w-400",children:[e.jsx("h2",{className:"mb-14 text-2xl",children:e.jsx(r,{message:"Other news"})}),s.map(t=>e.jsxs("div",{className:"mb-14 flex items-center gap-14 rounded border pr-14",children:[e.jsx(de,{article:t,size:"w-80 h-80",lazy:!1}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"line-clamp-2 text-sm font-semibold",children:e.jsx(be,{article:t})}),e.jsxs(I,{className:"mt-6 text-sm text-muted",children:[e.jsx(L,{date:t.created_at}),e.jsx(Ae,{article:t})]})]})]},t.id))]})}function Zr(){const{trans:s}=ae();return W({mutationFn:t=>Xr(t),onSuccess:async()=>{await ie.invalidateQueries({queryKey:["channel"]}),q(s(g("List deleted")))},onError:t=>H(t)})}function Xr(s){return k.delete(`channel/${s.listId}`).then(t=>t.data)}function It({list:s,user:t,showVisibility:a=!0}){const{user:n}=w(),i=n&&n.id===t.id;return e.jsxs("div",{className:"flex items-center gap-24 border-b py-24",children:[e.jsx(el,{className:"max-md:hidden",list:s}),e.jsxs("section",{className:"flex-auto",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(In,{list:s,className:"mr-auto block text-lg font-semibold capitalize"}),!s.config.preventDeletion&&!s.internal&&i&&e.jsxs(c.Fragment,{children:[e.jsx(f,{elementType:N,to:`${Ee(s)}/edit`,variant:"outline",size:"2xs",color:"primary",children:e.jsx(r,{message:"Edit"})}),e.jsxs(ve,{type:"modal",children:[e.jsx(f,{color:"danger",variant:"outline",radius:"rounded",size:"2xs",children:e.jsx(r,{message:"Delete"})}),e.jsx(sl,{list:s})]})]})]}),s.description&&e.jsx("p",{className:"mt-8 whitespace-nowrap text-sm text-muted",children:s.description}),e.jsx("div",{className:"mt-12 text-sm",children:e.jsxs("div",{className:"items-center justify-between gap-24 md:flex",children:[t&&e.jsx(lt,{user:t}),e.jsx(ot,{list:s,showVisibility:a,className:"max-md:mt-12"})]})})]})]})}function el({list:s,className:t}){var a,n;return(a=s.items)!=null&&a.length?e.jsx("div",{className:h("flex items-center overflow-hidden rounded",t),children:(n=s.items)==null?void 0:n.map((i,l)=>e.jsxs("div",{style:{zIndex:100-l},className:h("relative overflow-hidden rounded shadow-[2px_0_7px_#000]",l!==0&&"-ml-30"),children:[i.model_type==="title"?e.jsx(A,{title:i,size:"w-70",srcSize:"sm"}):e.jsx(Ne,{person:i,size:"w-70",srcSize:"sm"}),e.jsx("div",{className:"pointer-events-none absolute inset-0 shadow-[inset_0_0_0_1px_rgba(221,238,255,.35)]"})]},i.id))}):null}function sl({list:s}){const t=Zr(),{close:a}=Us();return e.jsx(Ze,{isDanger:!0,title:e.jsx(r,{message:"Delete list"}),body:e.jsx(r,{message:"Are you sure you want to delete this list?"}),confirm:e.jsx(r,{message:"Delete"}),isLoading:t.isPending,onConfirm:()=>t.mutate({listId:s.id},{onSuccess:a})})}function Tt(){const{userId:s="me"}=z();return J({endpoint:`user-profile/${s}/lists`,queryKey:["channel","profile-lists",s],paginate:"simple"})}function lo(){const s=Tt(),t=s.data?e.jsx(tl,{query:s}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsxs(M,{children:[e.jsx(Gt,{children:e.jsx(r,{message:"Your lists"})}),e.jsxs("div",{className:"container mx-auto mt-48 px-24",children:[e.jsx("header",{children:e.jsx(y,{headingType:"h1",margin:"mb-34",actions:e.jsx(f,{variant:"flat",color:"primary",elementType:N,to:"new",children:e.jsx(r,{message:"New list"})}),children:e.jsx(r,{message:"My lists"})})}),t]})]})}function tl({query:s}){const{user:t}=w();return s.noResults?e.jsx(E,{className:"mt-80",image:e.jsx(Rs,{src:Ws}),title:e.jsx(r,{message:"You have not created any lists yet."})}):e.jsxs("div",{children:[s.items.map(a=>e.jsx(It,{list:a,user:t},a.id)),e.jsx(R,{query:s})]})}const Ft=s=>["users",`${s}`,"profile"];function re(){const{userId:s}=z();return ne({queryKey:Ft(s),queryFn:()=>al(s)})}function al(s){return k.get(`user-profile/${s}`).then(t=>t.data)}function nl({profile:s,className:t}){return s?e.jsxs("div",{className:h("text-sm",t),children:[s.description&&e.jsx("p",{className:"rounded text-secondary whitespace-nowrap overflow-hidden overflow-ellipsis",children:s.description}),s.city||s.country?e.jsx("div",{className:"flex items-center gap-24 justify-between mt-4",children:(s.city||s.country)&&e.jsxs("div",{className:"rounded text-secondary w-max",children:[s.city,s.city&&","," ",s.country]})}):null]}):null}function il(){const{user:s}=w();return ne({queryKey:["users","followed","ids"],queryFn:()=>ll(),enabled:!!s})}function rl(s){const{data:t,isLoading:a}=il();return{isLoading:a,isFollowing:!!(t!=null&&t.ids.includes(s.id))}}function ll(){return k.get("users/me/followed-users/ids").then(s=>s.data)}function ol(){return W({mutationFn:s=>cl(s),onSuccess:async(s,{user:t})=>{await ie.invalidateQueries({queryKey:["users"]}),q(g("Following :name",{values:{name:t.name}}))},onError:s=>H(s)})}function cl({user:s}){return k.post(`users/${s.id}/follow`).then(t=>t.data)}function dl(){return W({mutationFn:s=>ml(s),onSuccess:async(s,{user:t})=>{await ie.invalidateQueries({queryKey:["users"]}),q(g("Stopped following :name",{values:{name:t.name}}))},onError:s=>H(s)})}function ml({user:s}){return k.post(`users/${s.id}/unfollow`).then(t=>t.data)}function $t({user:s,className:t,minWidth:a="min-w-82",...n}){const{user:i}=w(),{isFollowing:l,isLoading:o}=rl(s),d=ol(),m=dl(),u=h(t,a);return l?e.jsx(f,{...n,className:u,onClick:()=>m.mutate({user:s}),disabled:!i||(i==null?void 0:i.id)===s.id||m.isPending||o,children:e.jsx(r,{message:"Unfollow"})}):e.jsx(f,{...n,className:u,onClick:()=>d.mutate({user:s}),disabled:!i||(i==null?void 0:i.id)===s.id||d.isPending||o,children:e.jsx(r,{message:"Follow"})})}function ul(){const{fields:s,append:t,remove:a}=Yt({name:"links"});return e.jsxs("div",{children:[s.map((n,i)=>e.jsxs("div",{className:"mb-10 flex items-end gap-10",children:[e.jsx(K,{required:!0,type:"url",label:e.jsx(r,{message:"URL"}),name:`links.${i}.url`,size:"sm",className:"flex-auto"}),e.jsx(K,{required:!0,label:e.jsx(r,{message:"Short title"}),name:`links.${i}.title`,size:"sm",className:"flex-auto"}),e.jsx(C,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{a(i)},children:e.jsx(Jt,{})})]},n.id)),e.jsx(f,{variant:"text",color:"primary",startIcon:e.jsx(et,{}),size:"xs",onClick:()=>{t({url:"",title:""})},children:e.jsx(r,{message:"Add another link"})})]})}function xl(s){const{user:t}=w(),{trans:a}=ae();return W({mutationFn:n=>jl(n),onSuccess:async()=>{t&&await ie.invalidateQueries({queryKey:Ft(t.id)}),q(a(g("Profile updated")))},onError:n=>Zt(n,s)})}function jl(s){return k.put("user-profile/me",s).then(t=>t.data)}function hl({user:s}){var o,d,m,u;const{close:t,formId:a}=Us(),{data:n}=Xt(["countries"]),i=qs({defaultValues:{user:{username:s.username,image:s.image,first_name:s.first_name,last_name:s.last_name},profile:{city:(o=s.profile)==null?void 0:o.city,country:(d=s.profile)==null?void 0:d.country,description:(m=s.profile)==null?void 0:m.description},links:s.links}}),l=xl(i);return e.jsxs(ea,{size:"xl",children:[e.jsx(sa,{children:e.jsx(r,{message:"Edit your profile"})}),e.jsx(ta,{children:e.jsx(Bs,{id:a,form:i,onSubmit:x=>l.mutate(x,{onSuccess:()=>t()}),children:e.jsxs(aa,{children:[e.jsxs("div",{className:"items-start gap-30 md:flex",children:[e.jsx(na,{label:e.jsx(r,{message:"Avatar"}),name:"user.image",diskPrefix:"avatars",variant:"avatar",previewSize:"w-200 h-200",className:"max-md:mb-20"}),e.jsxs("div",{className:"flex-auto",children:[e.jsx(K,{name:"user.username",label:e.jsx(r,{message:"Username"}),className:"mb-24"}),e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(K,{name:"user.first_name",label:e.jsx(r,{message:"First name"}),className:"mb-24 flex-1"}),e.jsx(K,{name:"user.last_name",label:e.jsx(r,{message:"Last name"}),className:"mb-24 flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(K,{name:"profile.city",label:e.jsx(r,{message:"City"}),className:"mb-24 flex-1"}),e.jsxs(ia,{showSearchField:!0,className:"mb-24 flex-1",selectionMode:"single",name:"profile.country",label:e.jsx(r,{message:"Country"}),children:[e.jsx(T,{value:void 0,children:e.jsx(r,{message:"None"})},"none"),(u=n==null?void 0:n.countries)==null?void 0:u.map(x=>e.jsx(T,{value:x.name,children:x.name},x.code))]})]}),e.jsx(K,{name:"profile.description",label:e.jsx(r,{message:"Description"}),inputElementType:"textarea",rows:4})]})]}),e.jsxs("div",{className:"mt-24",children:[e.jsx("div",{className:"mb-16 border-b pb-16",children:e.jsx(r,{message:"Your links"})}),e.jsx(ul,{})]})]})})}),e.jsxs(ra,{children:[e.jsx(f,{type:"button",onClick:()=>{t()},children:e.jsx(r,{message:"Cancel"})}),e.jsx(f,{form:a,type:"submit",variant:"flat",color:"primary",disabled:l.isPending,children:e.jsx(r,{message:"Save"})})]})]})}function fl({user:s}){const{auth:{getUserProfileLink:t}}=c.useContext(pe),a=t(s);return e.jsxs(pl,{children:[e.jsx(Ke,{label:e.jsx(r,{message:"Followers"}),value:s.followers_count||0,link:`${a}/followers`}),e.jsx(Ke,{label:e.jsx(r,{message:"Following"}),value:s.followed_users_count||0,link:`${a}/followed-users`}),e.jsx(Ke,{label:e.jsx(r,{message:"Lists"}),value:s.lists_count||0,link:`${a}/lists`})]})}function pl(s){const t=c.Children.toArray(s.children);return e.jsx("div",{className:"flex items-center",children:t.map((a,n)=>e.jsxs(c.Fragment,{children:[a,n<t.length-1&&e.jsx("div",{className:"mx-10 h-34 w-1 bg-divider"})]},n))})}function Ke({label:s,value:t,link:a}){return e.jsxs(N,{to:a,className:"group block text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:e.jsx(_e,{value:t})}),e.jsx("div",{className:"text-xs uppercase text-muted transition-colors group-hover:text-primary",children:s})]})}function gl({url:s,className:t,size:a="w-16 h-16",alt:n}){if(!s)return null;const i=vl(s);return i?e.jsx("img",{className:h(a,t),src:i,alt:n||`${i} favicon`}):null}const vl=la(s=>{if(s.includes("youtube"))return"https://www.youtube.com/s/desktop/ca54e1bd/img/favicon.ico";oa(s)||(s=`${window.location.protocol}//${window.location.host}`);try{return"https://www.google.com/s2/favicons?domain="+new URL(s).origin}catch{}return null});function bl({links:s,className:t}){return s!=null&&s.length?s.length===1?e.jsxs("a",{className:"mt-24 flex items-center gap-6 transition-colors hover:text-primary max-md:justify-center md:mt-12",href:s[0].url,children:[e.jsx(nt,{className:"text-muted",size:"sm"}),e.jsx("span",{className:"capitalize",children:s[0].title})]}):e.jsx("div",{className:h("flex items-center",t),children:s.map(a=>e.jsx(Te,{label:a.title,children:e.jsx(Es,{elementType:"a",href:a.url,target:"_blank",rel:"noreferrer",children:e.jsx(gl,{url:a.url,alt:a.title,size:"w-20 h-20"})})},a.url))}):null}function Nl({user:s}){const{user:t}=w();return e.jsxs("div",{className:"flex flex-col items-center gap-24 md:flex-row",children:[e.jsx(te,{user:s,circle:!0,size:"w-140 h-140"}),e.jsxs("div",{className:"flex-auto",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),s.is_pro&&e.jsx(Xe,{size:"xs",color:"primary",radius:"rounded",className:"mt-2",children:e.jsx(r,{message:"PRO"})})]}),e.jsx(nl,{profile:s.profile}),e.jsxs("div",{className:"mt-12 flex items-center gap-14",children:[(t==null?void 0:t.id)!==s.id&&e.jsx($t,{variant:"outline",color:"primary",size:"xs",user:s}),(t==null?void 0:t.id)===s.id&&e.jsx(yl,{user:s})]})]}),e.jsxs("div",{children:[e.jsx(fl,{user:s}),e.jsx(bl,{links:s.links,className:"ml-auto mt-12 flex-shrink-0"})]})]})}function yl({user:s}){return e.jsxs(ve,{type:"modal",children:[e.jsx(f,{variant:"outline",size:"xs",startIcon:e.jsx(os,{}),children:e.jsx(r,{message:"Edit profile"})}),e.jsx(hl,{user:s})]})}const Is=[{uri:"lists",label:g("Lists")},{uri:"ratings",label:g("Ratings")},{uri:"reviews",label:g("Reviews")},{uri:"comments",label:g("Comments")},{uri:"followers",label:g("Followers")},{uri:"followed-users",label:g("Following")}];function oo(){const s=re(),t=s.data?e.jsxs(c.Fragment,{children:[e.jsx($,{query:s}),e.jsx(wl,{user:s.data.user})]}):e.jsx(S,{query:s,loaderClassName:"absolute inset-0 m-auto"});return e.jsx(M,{children:t})}function wl({user:s}){return e.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[e.jsx(Nl,{user:s}),e.jsx(Sl,{user:s})]})}function Sl({user:s}){const{auth:{getUserProfileLink:t}}=c.useContext(pe),a=t(s),{pathname:n}=As(),i=n.split("/").pop();let l=Is.findIndex(o=>o.uri===i);return l===-1&&(l=0),e.jsxs(cn,{className:"mt-34",selectedTab:l,children:[e.jsx(dn,{children:Is.map(o=>e.jsx(mn,{width:"min-w-132",elementType:N,to:`${a}/${o.uri}`,replace:!0,children:e.jsx(r,{...o.label})},o.uri))}),e.jsx("div",{className:"mt-24",children:e.jsx(ca,{})})]})}function co(){const t=re().data.user,a=Tt();return a.noResults?e.jsx(E,{imageHeight:"h-auto",imageMargin:"mb-14",image:e.jsx(Nn,{className:"text-muted"}),size:"sm",title:e.jsx(r,{message:"No lists yet"}),description:e.jsx(r,{message:"Follow :user for updates on lists they create in the future.",values:{user:t.name}})}):a.data?e.jsxs("div",{children:[a.items.map(n=>e.jsx(It,{list:n,user:t,showVisibility:!1},n.id)),e.jsx(R,{query:a})]}):e.jsx(S,{query:a})}function Cl(){const{userId:s="me"}=z();return J({endpoint:`user-profile/${s}/ratings`,queryKey:["reviews","profile-page-ratings",s],paginate:"simple"})}function kl({item:s,title:t,rating:a}){return e.jsxs("div",{children:[e.jsx(Zs,{episode:s,title:t,srcSize:"lg",aspect:"aspect-poster",showPlayButton:!0}),e.jsxs("div",{className:"mt-10 text-sm",children:[e.jsx(Z,{score:a??s.rating,className:"mb-4"}),e.jsx(rs,{title:t,episode:s,className:"block font-medium text-base"})]})]})}function mo(){const t=re().data.user,a=Cl();return a.noResults?e.jsx(E,{imageHeight:"h-auto",imageMargin:"mb-14",image:e.jsx(un,{className:"text-muted"}),size:"sm",title:e.jsx(r,{message:"No ratings yet"}),description:e.jsx(r,{message:"Follow :user for updates on titles they rate in the future.",values:{user:t.name}})}):a.data?e.jsxs(c.Fragment,{children:[e.jsx(Ce,{variant:"portrait",children:a.items.map(n=>{const i=n.reviewable;return i.model_type==="episode"?e.jsx(kl,{item:i,title:i.title,rating:n.score},n.id):e.jsx(qe,{item:n.reviewable,rating:n.score},n.id)})}),e.jsx(R,{query:a})]}):e.jsx(S,{query:a})}function Pl(){const{userId:s="me"}=z();return J({endpoint:`user-profile/${s}/reviews`,queryKey:["reviews","profile-page-reviews",s],paginate:"simple"})}function uo(){const t=re().data.user,a=Pl();return a.noResults?e.jsx(E,{imageHeight:"h-auto",imageMargin:"mb-14",image:e.jsx(tt,{className:"text-muted"}),size:"sm",title:e.jsx(r,{message:"No reviews yet"}),description:e.jsx(r,{message:"Follow :user for updates on titles they review in the future.",values:{user:t.name}})}):a.data?e.jsxs(c.Fragment,{children:[a.items.map(n=>e.jsx(_l,{review:n},n.id)),e.jsx(R,{query:a})]}):e.jsx(S,{query:a})}function _l({review:s}){const t=s.helpful_count+s.not_helpful_count,a=s.reviewable,n=a.model_type==="episode"?a.title:a;return e.jsxs("div",{className:"mb-24 flex items-start gap-24 border-b pb-24",children:[e.jsx(A,{title:n,size:"w-90",srcSize:"sm"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:a.model_type==="episode"?e.jsx(rs,{title:n,episode:a,target:"_blank"}):e.jsx(O,{title:n,target:"_blank"})}),e.jsx(Z,{className:"mb-8 mt-14",score:s.score}),e.jsx("div",{className:"text-base font-semibold",children:s.title}),e.jsx("p",{className:"mt-10 whitespace-pre-line text-sm",children:s.body}),t?e.jsx("div",{className:"mt-12 text-xs text-muted",children:e.jsx(r,{message:":helpfulCount out of :total people found this helpful.",values:{helpfulCount:s.helpful_count,total:s.helpful_count+s.not_helpful_count}})}):null]})]})}function Ll(){const{userId:s="me"}=z();return J({endpoint:`user-profile/${s}/comments`,queryKey:["comment","profile-page-comments",s],paginate:"simple"})}function xo(){const t=re().data.user,a=Ll();return a.noResults?e.jsx(E,{imageHeight:"h-auto",imageMargin:"mb-14",image:e.jsx(tt,{className:"text-muted"}),size:"sm",title:e.jsx(r,{message:"No comments yet"}),description:e.jsx(r,{message:"Follow :user for updates on comments they post in the future.",values:{user:t.name}})}):a.data?e.jsxs(c.Fragment,{children:[a.items.map(n=>n.commentable?e.jsx(zl,{comment:n},n.id):null),e.jsx(R,{query:a})]}):e.jsx(S,{query:a})}function zl({comment:s}){const t=s.commentable,a=t.model_type==="episode"?t.title:t;return e.jsxs("div",{className:"mb-24 flex items-start gap-24 border-b pb-24",children:[e.jsx(A,{title:a,size:"w-90",srcSize:"sm"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:t.model_type==="episode"?e.jsx(rs,{title:a,episode:t,target:"_blank"}):e.jsx(O,{title:a,target:"_blank"})}),e.jsx("time",{className:"mt-12 block text-xs text-muted",children:e.jsx(Le,{date:s.created_at})}),e.jsx("p",{className:"mt-8 whitespace-pre-line text-sm",children:s.content}),s.upvotes?e.jsxs("div",{className:"mt-12 flex items-center gap-8 text-muted",children:[e.jsx(st,{size:"sm"}),e.jsx("div",{children:s.upvotes})]}):null]})]})}function Il(){const{userId:s="me"}=z();return J({endpoint:`users/${s}/followers`,queryKey:["users","profile-page-followers",s],paginate:"simple"})}function Rt({follower:s}){return e.jsxs("div",{className:"mb-16 flex items-center gap-16 border-b pb-16",children:[e.jsx(te,{user:s,size:"lg"}),e.jsxs("div",{className:"text-sm",children:[e.jsx(xn,{user:s}),s.followers_count&&s.followers_count>0?e.jsx("div",{className:"text-xs text-muted",children:e.jsx(r,{message:"[one 1 followers|other :count followers]",values:{count:s.followers_count}})}):null]}),e.jsx($t,{variant:"outline",size:"xs",className:"ml-auto",user:s})]},s.id)}function jo(){const t=re().data.user,a=Il();return a.noResults?e.jsx(E,{imageHeight:"h-auto",imageMargin:"mb-14",image:e.jsx(at,{className:"text-muted"}),size:"sm",title:e.jsx(r,{message:"No followers yet"}),description:e.jsx(r,{message:"Be the first to follow :name.",values:{name:t.name}})}):a.data?e.jsxs(c.Fragment,{children:[a.items.map(n=>e.jsx(Rt,{follower:n},n.id)),e.jsx(R,{query:a})]}):e.jsx(S,{query:a})}function Tl(){const{userId:s="me"}=z();return J({endpoint:`users/${s}/followed-users`,queryKey:["users","profile-page-followed-users",s],paginate:"simple"})}function ho(){const t=re().data.user,a=Tl();return a.noResults?e.jsx(E,{imageHeight:"h-auto",imageMargin:"mb-14",image:e.jsx(at,{className:"text-muted"}),size:"sm",title:e.jsx(r,{message:"Not following anyone yet"}),description:e.jsx(r,{message:"Check back later to see users :user is following.",values:{user:t.name}})}):a.data?e.jsxs(c.Fragment,{children:[a.items.map(n=>e.jsx(Rt,{follower:n},n.id)),e.jsx(R,{query:a})]}):e.jsx(S,{query:a})}function Fl({homepageResolver:s}){const{homepage:t}=B();return(t==null?void 0:t.type)==="loginPage"?e.jsx(Ns,{children:e.jsx(da,{})}):(t==null?void 0:t.type)==="registerPage"?e.jsx(Ns,{children:e.jsx(ma,{})}):(t==null?void 0:t.type)==="customPage"?e.jsx(ua,{slug:t.value}):(s==null?void 0:s(t==null?void 0:t.type))||null}function $l(){var t,a;const s=(a=(t=Ms().loaders)==null?void 0:t.landingPage)==null?void 0:a.trendingTitles;return s!=null&&s.length?e.jsxs("div",{className:"landing-container mb-48 md:mb-80",children:[e.jsx("div",{className:"mb-48 mt-14 h-1 bg-divider md:mb-80"}),e.jsx("h2",{className:"mb-34 text-center text-4xl",children:e.jsx(r,{message:"See what's currently trending."})}),e.jsx("div",{className:"grid grid-cols-3 gap-24",children:s.map(n=>e.jsx(Rl,{title:n},n.id))})]}):null}function Rl({title:s}){const t=Ks(s==null?void 0:s.backdrop,{size:"lg"}),{trans:a}=ae(),n=h("h-full w-full rounded bg-fg-base/4 object-cover",t?"block":"flex items-center justify-center"),i=t?e.jsx("img",{className:n,draggable:!1,loading:"lazy",src:t,alt:a(g("Poster for :name",{values:{name:s.name}}))}):e.jsx("span",{className:n,children:e.jsx(jn,{className:"max-w-[60%] text-divider",size:"text-6xl"})});return e.jsxs("div",{children:[e.jsx("div",{className:"relative",children:i}),e.jsx("div",{className:"mt-10 text-center text-base font-medium",children:s.name})]})}function Ml(){var i,l,o;const s=B(),t=(i=s.homepage)==null?void 0:i.appearance,a=((l=s.homepage)==null?void 0:l.pricing)&&s.billing.enable,n=(o=s.homepage)==null?void 0:o.trending;return t?e.jsxs(c.Fragment,{children:[e.jsx(xa,{}),e.jsx(Dl,{content:t}),e.jsx(El,{content:t}),e.jsx(ql,{content:t}),n&&e.jsx($l,{}),e.jsx(Al,{content:t}),a&&e.jsx(Bl,{content:t}),e.jsx(Ds,{className:"landing-container"})]}):null}function Dl({content:s}){const{headerTitle:t,headerSubtitle:a,headerImage:n,headerImageOpacity:i,actions:l,headerOverlayColor1:o,headerOverlayColor2:d,blurHeaderImage:m}=s;let u;return o&&d?u=`linear-gradient(45deg, ${o} 0%, ${d} 100%)`:o?u=o:d&&(u=d),e.jsxs("header",{className:"relative isolate mb-14 overflow-hidden md:mb-60",children:[e.jsx("img",{src:n,style:{opacity:i},alt:"",width:"2347",height:"1244",decoding:"async",loading:"lazy",className:h("absolute left-1/2 top-1/2 z-20 max-w-none -translate-x-1/2 -translate-y-1/2",m&&"blur-sm")}),u&&e.jsx("div",{className:"absolute z-10 h-full w-full bg-alt",style:{background:u}}),e.jsx("div",{className:"gradient absolute inset-0 z-30 m-auto"}),e.jsxs("div",{className:"relative z-30 flex h-full flex-col",children:[e.jsx(ja,{color:"transparent",darkModeColor:"transparent",className:"flex-shrink-0",menuPosition:"landing-page-navbar",primaryButtonColor:"white"}),e.jsxs("div",{className:"mx-auto flex max-w-850 flex-auto flex-col items-center justify-center px-14 py-50 text-center text-white lg:py-140",children:[t&&e.jsx("h1",{className:"text-3xl font-normal md:text-5xl","data-testid":"headerTitle",children:e.jsx(r,{message:t})}),a&&e.jsx("div",{className:"max-auto mt-24 max-w-640 text-lg tracking-tight md:text-xl","data-testid":"headerSubtitle",children:e.jsx(r,{message:a})}),e.jsxs("div",{className:"flex min-h-50 gap-20 pb-30 pt-40 empty:min-h-0 md:pb-50 md:pt-60",children:[e.jsx(Ye,{item:l.cta1,variant:"raised",color:"white",size:"lg",radius:"rounded-full",className:"min-w-180"}),e.jsx(Ye,{item:l.cta2,variant:"text",color:"paper",size:"lg",radius:"rounded-full"})]})]})]}),e.jsx("div",{className:"absolute bottom-0 z-20 h-[6vw] w-full translate-y-1/2 -skew-y-3 transform bg"})]})}function Ye({item:s,...t}){if(!(s!=null&&s.label)||!(s!=null&&s.action))return null;const a=s.icon?ha(s.icon):void 0;return e.jsx(f,{elementType:s.type==="route"?N:"a",href:s.action,to:s.action,startIcon:a?e.jsx(a,{}):void 0,...t,children:e.jsx(r,{message:s.label})})}function El({content:s}){var t;return(t=s.primaryFeatures)!=null&&t.length?e.jsxs(c.Fragment,{children:[e.jsx("div",{className:"landing-container z-20 items-stretch gap-26 md:flex",id:"primary-features",children:s.primaryFeatures.map((a,n)=>e.jsxs("div",{className:"mb-14 flex-1 rounded-2xl px-24 py-36 text-center shadow-[0_10px_30px_rgba(0,0,0,0.08)] dark:bg-alt md:mb-0","data-testid":`primary-root-${n}`,children:[e.jsx(fa,{className:"mx-auto mb-30 h-128","data-testid":`primary-image-${n}`,src:a.image}),e.jsx("h2",{className:"my-16 text-lg font-medium","data-testid":`primary-title-${n}`,children:e.jsx(r,{message:a.title})}),e.jsx("div",{className:"text-md text-[0.938rem]","data-testid":`primary-subtitle-${n}`,children:e.jsx(r,{message:a.subtitle})})]},n))}),e.jsx("div",{className:"mt-100 h-1 bg-divider"})]}):null}function ql({content:s}){var t;return e.jsx("div",{className:h("relative overflow-hidden",((t=s.primaryFeatures)==null?void 0:t.length)&&"pt-100"),children:e.jsx("div",{className:"landing-container relative",id:"features",children:s.secondaryFeatures.map((a,n)=>{const i=n%2===0;return e.jsxs("div",{"data-testid":`secondary-root-${n}`,className:h("relative z-20 mb-14 py-16 md:mb-80 md:flex",i&&"flex-row-reverse"),children:[e.jsx("img",{src:a.image,className:"mr-auto aspect-[600/382] w-580 max-w-full rounded-lg shadow-lg dark:border",alt:""}),e.jsxs("div",{className:"ml-30 mr-auto max-w-350 pt-30",children:[e.jsx("small",{className:"mb-16 text-xs font-medium uppercase tracking-widest text-muted","data-testid":`secondary-subtitle-${n}`,children:e.jsx(r,{message:a.subtitle})}),e.jsx("h3",{className:"py-16 text-3xl","data-testid":`secondary-title-${n}`,children:e.jsx(r,{message:a.title})}),e.jsx("div",{className:"h-2 w-50 bg-black/90 dark:bg-divider"}),e.jsx("div",{className:"my-20 text-[0.938rem]","data-testid":`secondary-description-${n}`,children:e.jsx(r,{message:a.description})})]})]},n)})})})}function Bl({content:s}){var i;const t=pa("landingPage"),[a,n]=c.useState("yearly");return e.jsx("div",{className:"py-80 sm:py-128",id:"pricing",children:e.jsxs("div",{className:"mx-auto max-w-1280 px-24 lg:px-32",children:[e.jsxs("div",{className:"text-center",children:[s.pricingTitle&&e.jsx("h2",{className:"font-display text-3xl tracking-tight sm:text-4xl","data-testid":"pricingTitle",children:e.jsx(r,{message:s.pricingTitle})}),s.pricingSubtitle&&e.jsx("p",{className:"mt-16 text-lg text-muted","data-testid":"pricingSubtitle",children:e.jsx(r,{message:s.pricingSubtitle})})]}),e.jsx(ga,{products:(i=t.data)==null?void 0:i.products,selectedCycle:a,onChange:n,className:"my-50 flex justify-center",size:"lg"}),e.jsx(va,{selectedCycle:a,productLoader:"landingPage"})]})})}function Al({content:{footerSubtitle:s,footerImage:t,footerTitle:a,actions:n}}){return!a&&!s?null:e.jsxs("div",{className:"relative overflow-hidden bg-black py-90 text-white before:pointer-events-none before:absolute before:inset-0 before:z-10 before:bg-gradient-to-r before:from-black before:to-transparent md:py-128","data-testid":"footerImage",children:[t&&e.jsx("img",{draggable:!1,src:t,alt:"",width:"2347",height:"1244",decoding:"async",loading:"lazy",className:"absolute left-1/2 top-1/2 max-w-none -translate-x-1/2 -translate-y-1/2 blur-sm"}),e.jsx("div",{className:"relative z-20 mx-auto max-w-1280 px-24 text-center sm:px-16 lg:px-32",children:e.jsxs("div",{className:"mx-auto max-w-512 text-center",children:[a&&e.jsx("h2",{className:" font-display text-3xl tracking-tight sm:text-4xl","data-testid":"footerTitle",children:e.jsx(r,{message:a})}),s&&e.jsx("p",{className:"mt-16 text-lg tracking-tight","data-testid":"footerSubtitle",children:e.jsx(r,{message:s})}),e.jsx(Ye,{item:n.cta3,size:"lg",radius:"rounded-full",variant:"flat",color:"white",className:"mt-40 block","data-testid":"cta3"})]})})]})}function fo(){var a,n;const{homepage:s}=B(),{user:t}=w();return(a=s==null?void 0:s.type)!=null&&a.startsWith("channel")||(n=s==null?void 0:s.type)!=null&&n.startsWith("landing")&&t?e.jsx(li,{}):e.jsx(Fl,{homepageResolver:()=>e.jsx(Ml,{})})}export{jt as ChannelPage,vo as CreateUserListPage,bo as EditUserListPage,no as EpisodeFullCreditsPage,to as EpisodePage,ao as EpisodeVideosPage,fo as Homepage,li as HomepageChannelPage,Ml as LandingPage,Gl as ListChannelPage,ro as NewsArticlePage,io as PersonPage,xo as ProfileCommentsPanel,ho as ProfileFollowedUsersPanel,jo as ProfileFollowersPanel,co as ProfileListsPanel,mo as ProfileRatingsPanel,uo as ProfileReviewsPanel,Ql as SearchPage,so as SeasonPage,No as SiteCreateUserListPage,yo as SiteEditUserListPage,eo as TitleFullCreditsPage,Xl as TitleImagesPage,Jl as TitlePage,Zl as TitleVideosPage,lo as UserListsIndexPage,oo as UserProfilePage,Yl as WatchPage};
//# sourceMappingURL=site-routes.lazy-f14ad937.js.map
